require=function e(t,n,i){function o(a,c){if(!n[a]){if(!t[a]){var r="function"==typeof require&&require;if(!c&&r)return r(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({AudioMng:[function(e,t,n){"use strict";cc._RFpush(t,"46bf8MJ+ylG6L5OVxzUo6vg","AudioMng"),cc.Class({"extends":cc.Component,properties:{winAudio:{"default":null,url:cc.AudioClip},loseAudio:{"default":null,url:cc.AudioClip},cardAudio:{"default":null,url:cc.AudioClip},buttonAudio:{"default":null,url:cc.AudioClip},chipsAudio:{"default":null,url:cc.AudioClip},bgm:{"default":null,url:cc.AudioClip}},playMusic:function(){cc.audioEngine.playMusic(this.bgm,!0)},pauseMusic:function(){cc.audioEngine.pauseMusic()},resumeMusic:function(){cc.audioEngine.resumeMusic()},_playSFX:function(e){cc.audioEngine.playEffect(e,!1)},playButton:function(){this._playSFX(this.buttonAudio)}}),cc._RFpop()},{}],ButtonScaler:[function(e,t,n){"use strict";cc._RFpush(t,"5c156RZ5+lJ4It6heya76Cw","ButtonScaler"),cc.Class({"extends":cc.Component,properties:{pressedScale:.85,transDuration:.1},onLoad:function(){function e(e){this.stopAllActions(),i&&i.playButton(),this.runAction(n.scaleDownAction)}function t(e){this.stopAllActions(),this.runAction(n.scaleUpAction)}var n=this,i=AudioMng();n.initScale=n.node.scale,n.scaleDownAction=cc.scaleTo(n.transDuration,n.pressedScale),n.scaleUpAction=cc.scaleTo(n.transDuration,n.initScale),this.node.on("touchstart",e,this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RFpop()},{}],buyItemsHandler:[function(e,t,n){"use strict";cc._RFpush(t,"c49f0AZwPBMHpfqVQ9qFWIM","buyItemsHandler");var i=e("msgHandler"),o={};o.interest="buyItemsSuccess",o.Process=function(e){GameEvent().SendEvent("BuyItemsSuccess"),GameNotify().AddText("购买成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],buyProperty:[function(e,t,n){"use strict";cc._RFpush(t,"77e9324BmFCb5KLA71q3gE2","buyProperty"),cc.Class({"extends":cc.Component,properties:{addBtn:cc.Button,subBtn:cc.Button,buyBtn:cc.Button,cancelBtn:cc.Button,propName:cc.Label,propType:cc.Label,describe:cc.Label,buyNumber:cc.Label,amountPrice:cc.Label,limitLevel:cc.Label},onLoad:function(){this.addBtn.node.on("click",this.OnAdd,this),this.subBtn.node.on("click",this.OnSub,this),this.buyBtn.node.on("click",this.OnBuy,this),this.cancelBtn.node.on("click",function(e){this.OnHide()}.bind(this))},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnAdd:function(e){this.buyCount+=1,this.buyCount<=0&&(this.buyCount=1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币",this.buyCount>1&&(this.subBtn.interactable=!0)},OnSub:function(e){this.buyCount-=1,this.buyCount<=0&&(this.buyCount=1,this.subBtn.interactable=!1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币"},OnBuy:function(e){var t=window.GameData;if(t.GetMoney()<this.buyCount*this.buyPrice){var n=Table.GetEntry("error",6);return void(n?GameNotify().AddText(n.description,window.ErrorNotifyColor):GameNotify().AddText("金币不足!",window.ErrorNotifyColor))}var i={type:"buyItems",kinds:1,buyId:this.buyId,buyCount:this.buyCount},o=JSON.stringify(i);GameSocket().Send(o),this.OnHide()},Setup:function(e){this.propName.string=e.name,this.describe.string=e.desc,this.buyId=e.id,this.buyPrice=e.buy,this.buyCount=0,this.limitLevel.node.active=!1,this.OnAdd(null)}}),cc._RFpop()},{}],buySeed:[function(e,t,n){"use strict";cc._RFpush(t,"ad48686xkROraOi6t5jt9WJ","buySeed"),cc.Class({"extends":cc.Component,properties:{addBtn:cc.Button,subBtn:cc.Button,buyBtn:cc.Button,cancelBtn:cc.Button,buyNumber:cc.Label,seedName:cc.Label,time:cc.Label,output:cc.Label,price:cc.Label,gains:cc.Label,getExp:cc.Label,amountPrice:cc.Label,limitLevel:cc.Label},onLoad:function(){this.addBtn.node.on("click",this.OnAdd,this),this.subBtn.node.on("click",this.OnSub,this),this.buyBtn.node.on("click",this.OnBuy,this),this.cancelBtn.node.on("click",function(e){this.OnHide()}.bind(this))},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnAdd:function(e){this.buyCount+=1,this.buyCount<=0&&(this.buyCount=1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币",this.buyCount>1&&(this.subBtn.interactable=!0)},OnSub:function(e){this.buyCount-=1,this.buyCount<=0&&(this.buyCount=1,this.subBtn.interactable=!1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币"},OnBuy:function(e){var t=window.GameData;if(t.GetMoney()<this.buyCount*this.buyPrice){var n=Table.GetEntry("error",6);return void(n?GameNotify().AddText(n.description,window.ErrorNotifyColor):GameNotify().AddText("金币不足!",window.ErrorNotifyColor))}var i={type:"buyItems",kinds:0,buyId:this.buyId,buyCount:this.buyCount},o=JSON.stringify(i);GameSocket().Send(o),this.OnHide()},Setup:function(e){this.seedName.string=e.name,this.time.string=e.time.amount/60+"小时",this.output.string=e.output+"个",this.price.string=e.fruit.price+"金币",this.gains.string=e.output*e.fruit.price,this.getExp.string=e.sowExp+e.harvestExp+e.clearExp,this.buyId=e.id,this.buyPrice=e.buy,this.buyCount=0;var t=window.GameData;t.GetLevel()<e.minLevel?(this.buyBtn.interactable=!1,this.limitLevel.node.active=!0,this.limitLevel.string="需求Lv."+e.minLevel+"(等级不足)"):(this.limitLevel.node.active=!1,this.buyBtn.interactable=!0),this.OnAdd(null)}}),cc._RFpop()},{}],canvas:[function(e,t,n){"use strict";cc._RFpush(t,"e8895VhD7hAh6SOISVoNqK9","canvas"),cc.Class({"extends":cc.Component,properties:{gameNotify:cc.Prefab},onLoad:function(){}}),cc._RFpop()},{}],chatSocket:[function(e,t,n){"use strict";cc._RFpush(t,"62439VrUPBL9ZopzPVNmVyO","chatSocket");var i=function(){this.init=!1};if(i.prototype.Init=function(){this.init=!0,this.connected=!1,this.socket=null,this.isReconnect=!1},i.prototype.Connect=function(e,t,n){var i=this;if(!i.connected){if("undefined"==typeof io)return void GameLog("SocketIO unable to loaded !!!");try{i.address=e,i.port=t,i.router=n;var o=io.connect("http://"+e+":"+t+"/"+("undefined"!=typeof n?n:""),{reconnection:!0});i.socket=o,o.on("clientJoin",function(e){}),o.on("clientDisconnect",function(e){}),o.on("connect",function(){i.connected=!0,i.isReconnect===!0&&(i.isReconnect=!1)}),o.on("reconnect",function(){i.isReconnect=!0}),o.on("disconnect",function(){i.connected=!1}),i.OnReceiveMessage()}catch(s){GameLog(s)}}},i.prototype.IsConnected=function(){return this.connected},i.prototype.OnReceiveMessage=function(){var e=this;e.socket.on("userList",function(e){GameLog("---------->",e),GameData.homeUsers=e.slice(),GameEvent().SendEvent("UpdateHomeMsgList")}),e.socket.on("chat",function(e){GameLog("---------->",e),GameData.worldMsgList.length>100&&GameData.worldMsgList.shift(),GameData.worldMsgList.push(e),"undefined"==typeof GameData.worldUsers[e.userId]&&(GameData.worldUsers[e.userId]={name:e.name,userId:e.userId,lv:e.lv}),GameEvent().SendEvent("UpdateWorldMsgList")}),e.socket.on("roomChat",function(e){GameLog("---------->",e),GameData.homeMsgList.length>50&&GameData.homeMsgList.shift(),GameData.homeMsgList.push(e),GameEvent().SendEvent("UpdateHomeMsgList")})},i.prototype.Send=function(e,t){this.connected&&this.socket.emit(e,t)},"undefined"!=typeof t){var o=new i;o.Init(),t.exports=o}cc._RFpop()},{}],chat:[function(e,t,n){"use strict";cc._RFpush(t,"4b002RQzdtHy5mIoqT/Uy8F","chat"),cc.Class({"extends":cc.Component,properties:{closeBtn:cc.Button,sendBtn:cc.Button,editBox:cc.EditBox,radioButton:{"default":[],type:cc.Toggle},_currentToggle:cc.Toggle,scrollViewL:cc.ScrollView,scrollViewR:cc.ScrollView,headPrefab:cc.Prefab,chatLPrefab:cc.Prefab,chatRPrefab:cc.Prefab},onLoad:function(){this._time=0,this.closeBtn.node.on("click",this.OnClose,this),this.sendBtn.node.on("click",this.OnSend,this);for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e];break}GameEvent().OnEvent("UpdateWorldMsgList",this.ReLoadByWorld,this),GameEvent().OnEvent("UpdateHomeMsgList",this.ReLoadByHome,this);var t=this.radioButton.indexOf(this._currentToggle);0===t?this.ReLoadByWorld():1===t&&this.ReLoadByHome()},OnClose:function(){this.OnHide()},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},radioButtonClicked:function(e){if(this._currentToggle!==e){this._currentToggle=e;var t=this.radioButton.indexOf(this._currentToggle);0===t?this.ReLoadByWorld():1===t&&this.ReLoadByHome()}},ReLoadByWorld:function(){if(this.node.active!==!1){var e=this.radioButton.indexOf(this._currentToggle);if(0===e){var t=this.scrollViewR.content;t.removeAllChildren();for(var n,i,o,s,a,c=window.GameData,r=0;r<c.worldMsgList.length;++r)n=c.worldMsgList[r],i=n.userId===c.userId?cc.instantiate(this.chatRPrefab):cc.instantiate(this.chatLPrefab),o=i.getChildByName("name").getComponent(cc.Label),o.string=n.name+":",s=i.getChildByName("msg_s-d"),a=s.getChildByName("label").getComponent(cc.Label),a.string=n.msg,t.addChild(i);this.scrollViewR.scrollToBottom(.1),t=this.scrollViewL.content,t.removeAllChildren();for(var h in c.worldUsers)"undefined"!=typeof c.worldUsers[h]&&parseInt(h)!==c.userId&&(i=cc.instantiate(this.headPrefab),this.InitHeadPrefab(i,c.worldUsers[h]),t.addChild(i))}}},ReLoadByHome:function(){if(this.node.active!==!1){var e=this.radioButton.indexOf(this._currentToggle);if(1===e){var t=this.scrollViewR.content;t.removeAllChildren();for(var n,i,o,s,a,c=window.GameData,r=0;r<c.homeMsgList.length;++r)n=c.homeMsgList[r],i=n.userId===c.userId?cc.instantiate(this.chatRPrefab):cc.instantiate(this.chatLPrefab),o=i.getChildByName("name").getComponent(cc.Label),o.string=n.name+":",s=i.getChildByName("msg_s-d"),a=s.getChildByName("label").getComponent(cc.Label),a.string=n.msg,t.addChild(i);this.scrollViewR.scrollToBottom(.1),t=this.scrollViewL.content,t.removeAllChildren();for(var h in c.homeUsers)"undefined"!=typeof c.homeUsers[h]&&parseInt(h)!==c.userId&&(i=cc.instantiate(this.headPrefab),this.InitHeadPrefab(i,c.homeUsers[h]),t.addChild(i))}}},InitHeadPrefab:function(e,t){var n=t.name,i=t.userId,o=e.getChildByName("name").getComponent(cc.Label);o.string=n;var s=e.getChildByName("lvLabel").getComponent(cc.Label);s.string="lv."+t.lv,e.userId=i,e.on(cc.Node.EventType.TOUCH_END,function(e){this.OnVisitUser(e)}.bind(this))},OnVisitUser:function(e){this.OnHide();var t=window.GameData,n=e.target.userId;if(n!==t.userId){var i={type:"visitHome",userId:n},o=JSON.stringify(i);GameSocket().Send(o)}},OnSend:function(){if(""!==this.editBox.string)if(this._time>1){this._time=0;var e=this.radioButton.indexOf(this._currentToggle);0===e?ChatSocket().Send("chat",this.editBox.string):1===e&&ChatSocket().Send("roomChat",this.editBox.string),this.editBox.string=""}else{var t=Table.GetEntry("error",26);t&&GameNotify().AddText(t.description,ErrorNotifyColor)}},update:function(e){this._time+=e}}),cc._RFpop()},{}],clearDisaster:[function(e,t,n){"use strict";cc._RFpush(t,"a7ba5iZgTVCs65ppDPuBXvh","clearDisaster");var i=e("msgHandler"),o={};o.interest="clearDisasterSuccess",o.Process=function(e){GameEvent().SendEvent("ClearDisasterSuccess"),1===e.disasterType?GameNotify().AddText("除虫成功!"):2===e.disasterType?GameNotify().AddText("浇水成功!"):3===e.disasterType&&GameNotify().AddText("营养添加成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],detail:[function(e,t,n){"use strict";cc._RFpush(t,"0b4fcmzcGxLiKOLDwR+Zvy2","detail"),cc.Class({"extends":cc.Component,properties:{scrollView:cc.ScrollView,closeBtn:cc.Button,log1Prefab:cc.Prefab,log2Prefab:cc.Prefab,log3Prefab:cc.Prefab,log4Prefab:cc.Prefab},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),GameEvent().OnEvent("UpdateLogs",this.ReLoad,this)},OnClose:function(){this.OnHide()},OnShow:function(){this.node.active=!0,this.RequstLogs(),this.ReLoad()},OnHide:function(){this.node.active=!1},RequstLogs:function(){var e={type:"getLogs"},t=JSON.stringify(e);GameSocket().Send(t)},ReLoad:function(){var e=window.GameData,t=e.logs,n=this.scrollView.content;n.removeAllChildren();for(var i,o=0;o<t.length;++o)i=this.InitLogPerfab(t[o]),i&&n.addChild(i);this.scrollView.scrollToTop(.1)},InitLogPerfab:function(e){var t,n=null,i=null,o=JSON.parse(e.data),s=new Date,a=new Date(e.time),c="";if(s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()&&(s.getDate()===a.getDate()?c="今天":s.getDate()-1===a.getDate()&&(c="昨天")),0===c.length&&(c+=a.getMonth()<9?"0"+(a.getMonth()+1):a.getMonth()+1,c+="-",c+=a.getDate()<10?"0"+(a.getDate()+1):a.getDate()),1===e.type){var r=Table.GetEntry("plant",o[2]);o[4]===-1?(n=cc.instantiate(this.log1Prefab),i=n.getComponent(cc.RichText),t=i.string,t=t.replace(/name/,o[1]),t=t.replace(/fruitName/,r.fruit.name),t=t.replace(/number/,o[3])):o[4]===-2?(n=cc.instantiate(this.log4Prefab),i=n.getComponent(cc.RichText),t=i.string,t=t.replace(/name/,o[1])):(n=cc.instantiate(this.log2Prefab),i=n.getComponent(cc.RichText),t=i.string,t=t.replace(/name/,o[1]),t=t.replace(/fruitName/,r.fruit.name),t=t.replace(/number1/,o[3]),t=t.replace(/number2/,o[4]))}else 2===e.type&&(n=cc.instantiate(this.log3Prefab),i=n.getComponent(cc.RichText),t=i.string,t=t.replace(/name/,o[1]),1===e.subType?t=t.replace(/disasterName/,"虫灾"):2===e.subType?t=t.replace(/disasterName/,"旱灾"):3===e.subType&&(t=t.replace(/disasterName/,"营养流失")),t=t.replace(/exp/,o[2]));return t=t.replace(/time/,c),i&&(i.string=t),n}}),cc._RFpop()},{}],duihuan:[function(e,t,n){"use strict";cc._RFpush(t,"1d27dYq6JxBM6T6fiQdrByj","duihuan"),cc.Class({"extends":cc.Component,properties:{shangpinItemfab:cc.Prefab,conditonItemfab:cc.Prefab,shangpinScroll:cc.ScrollView,conditionScroll:cc.ScrollView,scrollbg_1:cc.Sprite,scrollbg_2:cc.Sprite,radioButton:{"default":[],type:cc.Toggle},_currentToggle:cc.Toggle,shangPinInfoShowNode:cc.Node,shangpinImg:cc.Sprite,shangpinNameLab:cc.Label,shangpinNumLab:cc.Label,shangpinSubBtn:cc.Button,shangpinAddBtn:cc.Button,duihuanBtn:cc.Button,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),this.shangpinSubBtn.node.on("click",this.OnSub,this),this.shangpinAddBtn.node.on("click",this.OnAdd,this),this.duihuanBtn.node.on("click",this.OnDuiHuan,this);for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e],this.ShowTheScrollBG(e+1);break}this.shangpinScroll.scrollToTop(.1),this.conditionScroll.scrollToTop(.1)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=new Array(["duihuanshangpin",this.shangpinItemfab,this.InitShangPinfab],["duihuanshangpin",this.shangpinItemfab,this.InitWeiZhifab]),n=this.shangpinScroll.content;if(n.removeAllChildren(),this.haveShowInit=!1,this.canDuiHuan=!1,this.shangPinInfoShowNode.active=!1,t.length>e){var i=Table.GetEntry("duihuanshop",e+1);if(i&&i.sell.length>0){for(var o,s,a,c=0;c<i.sell.length;++c)o=i.sell[c],s=Table.GetEntry(t[e][0],o),a=cc.instantiate(t[e][1]),t[e][2].bind(this)(a,s),n.addChild(a);this.shangpinScroll.scrollToTop(.1)}}}}},Setup:function(e){"undefined"!=typeof e&&(this.radioButton[e].check(),this._currentToggle=this.radioButton[e])},ShowTheScrollBG:function(e){this.scrollbg_1.node.active=!1,this.scrollbg_2.node.active=!1,1===e?this.scrollbg_1.node.active=!0:2===e&&(this.scrollbg_2.node.active=!0)},InitShangPinfab:function(e,t){var n=e.getChildByName("shangpinImag").getComponent("cc.Sprite");cc.loader.loadRes(t.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(n));var i=e.getChildByName("shangpinNameLab").getComponent("cc.Label");i.string=t.name,e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowShangPinInfo(t)}.bind(this)),this.haveShowInit===!1&&(this.haveShowInit=!0,this.ShowShangPinInfo(t))},InitWeiZhifab:function(e,t){},ShowShangPinInfo:function(e){this.shangPinInfoShowNode.active=!0,this.showShangPinConfig=e;var t=this.shangpinImg.getComponent("cc.Sprite");cc.loader.loadRes(e.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(t));var n=this.shangpinNameLab.getComponent("cc.Label");n.string=e.name,this.duiHuanCount=1;var i=this.shangpinNumLab.getComponent("cc.Label");i.string=this.duiHuanCount,this.RefreshTheCondition()},RefreshTheCondition:function(){var e=this.conditionScroll.content;e.removeAllChildren();var t=!1;if(this.showShangPinConfig.duihuanProp.length>0)for(var n=0;n<this.showShangPinConfig.duihuanProp.length;++n){var i,o,s=this.showShangPinConfig.duihuanProp[n].id,a=this.showShangPinConfig.duihuanProp[n].count*this.duiHuanCount,c=this.GetPropHaveNum(s);if(i=Table.GetEntry("hechengProp",s),o=cc.instantiate(this.conditonItemfab),this.InitConditionfab.bind(this)(o,i,a,c),e.addChild(o),c<a){t=!1;var r=o.getChildByName("conditionLab");r.color=cc.Color.RED}}this.conditionScroll.scrollToTop(.1),t===!0?this.duihuanBtn.enabled=!0:this.duihuanBtn.enabled=!1,this.canDuiHuan=t},InitConditionfab:function(e,t,n,i){var o=e.getChildByName("conditionLab").getComponent("cc.Label");o.string=t.name+"   :   ("+i+"/"+n+")"},GetPropHaveNum:function(e){var t=0,n=window.GameData;return"undefined"!=typeof n["package"][3]&&"undefined"!=typeof n["package"][3][e]&&(t=n["package"][3][e]),t},OnSub:function(){this.duiHuanCount--,this.duiHuanCount<1&&(this.duiHuanCount=1);var e=this.shangpinNumLab.getComponent("cc.Label");e.string=this.duiHuanCount,this.RefreshTheCondition()},OnAdd:function(){this.duiHuanCount++;var e=this.shangpinNumLab.getComponent("cc.Label");e.string=this.duiHuanCount,this.RefreshTheCondition()},OnDuiHuan:function(){if(this.canDuiHuan===!0){this.OnHide();var e={type:"duihuanShangPin",shangpinId:this.showShangPinConfig.id,shangpinNum:this.duiHuanCount},t=JSON.stringify(e);GameSocket().Send(t)}},radioButtonClicked:function(e){if(this._currentToggle!==e){this._currentToggle=e;var t=this.radioButton.indexOf(this._currentToggle);this.ShowTheScrollBG(t+1),this.Load()}},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}],duihuanyouji:[function(e,t,n){"use strict";cc._RFpush(t,"65c86Qywr9Evr2i7Rmwg7Fb","duihuanyouji"),cc.Class({"extends":cc.Component,properties:{shangpinImg:cc.Sprite,shangpinNameLab:cc.Label,shangpinInfoLab:cc.Label,shangpinNumLab:cc.Label,shoujianrenBox:cc.EditBox,youbianBox:cc.EditBox,dizhiBox:cc.EditBox,dianhuaBox:cc.EditBox,cancelBtn:cc.Button,confirmBtn:cc.Button,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),this.cancelBtn.node.on("click",this.OnCancel,this),this.confirmBtn.node.on("click",this.OnConfirm,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){this.shangpinId=window.duihuanshangpinid,this.shangpinNum=window.duihuanshangpinNum;var e=Table.GetEntry("duihuanshangpin",this.shangpinId),t=this.shangpinImg.getComponent("cc.Sprite");cc.loader.loadRes(e.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(t));var n=this.shangpinNameLab.getComponent("cc.Label");n.string=e.name;var i=this.shangpinInfoLab.getComponent("cc.Label");i.string=e.desc;var o=this.shangpinNumLab.getComponent("cc.Label");o.string=this.shangpinNum}},OnCancel:function(){this.OnHide()},OnConfirm:function(){if(0===this.shoujianrenBox.string.length)return void GameNotify().AddText("请输入收件人");if(0===this.youbianBox.string.length)return void GameNotify().AddText("请输入邮编");if(0===this.dizhiBox.string.length)return void GameNotify().AddText("请输入详细地址");if(0===this.dianhuaBox.string.length)return void GameNotify().AddText("请输入联系电话");this.OnHide();var e={type:"duihuanyouji",shangpinId:this.shangpinId,shangpinNum:this.shangpinNum,shoujianren:this.GetShouJianRen(),youbian:this.GetYouBian(),dizhi:this.GetDiZhi(),dianhua:this.GetDianHua()},t=JSON.stringify(e);GameSocket().Send(t)},GetShouJianRen:function(){return this.shoujianrenBox.string},GetYouBian:function(){return this.youbianBox.string},GetDiZhi:function(){return this.dizhiBox.string},GetDianHua:function(){return this.dianhuaBox.string},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}],error:[function(e,t,n){"use strict";cc._RFpush(t,"e3e63hfLZdPjZl6YD4R3NNl","error");var i=e("msgHandler"),o={};o.interest="error",o.Process=function(e){GameLog(e);var t=Table.GetEntry("error",e.id);t&&(GameLog(t.description),GameNotify().AddText(t.description,ErrorNotifyColor))},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],friendHandler:[function(e,t,n){"use strict";cc._RFpush(t,"e1968tX8cNPGK0xKOkWCgEw","friendHandler");var i=e("msgHandler"),o={};o.interest="addFriendSuccess",o.Process=function(e){GameNotify().AddText("添加好友成功!")},i.Add(o);var s={};s.interest="removeFriendSuccess",s.Process=function(e){GameNotify().AddText("删除好友成功!")},i.Add(s),cc._RFpop()},{msgHandler:"msgHandler"}],friendsList:[function(e,t,n){"use strict";cc._RFpush(t,"cd235UIPCVNzJPpfOP1Jw+z","friendsList");var i=e("msgHandler"),o={};o.interest="friendsList",o.Process=function(e){var t=window.GameData;t.friendsList=e.list.slice(),GameEvent().SendEvent("UpdateFriendsList")},i.Add(o);var s={};s.interest="friendsListSuccess",s.Process=function(e){var t=window.GameData;t.friendsList=e.list.slice(),GameEvent().SendEvent("UpdateFriendsList")},i.Add(s),cc._RFpop()},{msgHandler:"msgHandler"}],gameData:[function(e,t,n){"use strict";cc._RFpush(t,"b1eb7lYRI5DV5yopcwfGiwY","gameData"),function(){var e={userId:-1,userName:"",money:0,experience:0,vip:0,lands:[],"package":[],neighbourList:[],friendsList:[],visitUser:{},logs:[],pet:[],msgs:[],worldUsers:{},worldMsgList:[],homeUsers:[],homeMsgList:[]};e.GetUserId=function(){return this.userId},e.GetUserName=function(){return this.userName},e.GetMoney=function(){return this.money},e.GetLevel=function(){var e=1;return this.experience>0&&(e+=Math.floor(this.experience/200)),e},e.GetLevelByExp=function(e){var t=1;return e>0&&(t+=Math.floor(e/200)),t},e.GetLevelExp=function(){return this.experience%200},e.GetLevelExpByExp=function(e){return e%200},e.GetLevelExpMax=function(){return 200},"undefined"!=typeof t&&(t.exports=e),"undefined"!=typeof window&&(window.GameData=e)}(),cc._RFpop()},{}],gameEvent:[function(e,t,n){"use strict";cc._RFpush(t,"863b78ivfJOp5nxyBAag2+G","gameEvent");var i=cc.Class({"extends":cc.Component,statics:{inst:null},onLoad:function(){i.inst=this},OnEvent:function(e,t,n){this.node.on(e,t,n)},OffEvent:function(e,t,n){this.node.off(e,t,n)},SendEvent:function(e,t){this.node.emit(e,t)}});cc._RFpop()},{}],gameLayer:[function(e,t,n){"use strict";function i(e,t,n,i,o){var s=0,a=[0,0,0];if(t<e)return a;for(var c=Math.floor((t-e)/C),r=0;r<3;++r)if(s+=n[r],s>c){if("undefined"!=typeof o&&o){var h=Math.floor((o-t)/C);if(s-c>h)a[r]=Math.floor(h/y*i);else for(a[r]=Math.floor((s-c)/y*i),h-=s-c;++r<3;){if(!(h>n[r])){a[r]=Math.floor(h/y*i);break}a[r]=Math.floor(n[r]/y*i),h-=n[r]}break}a[r]=Math.floor((s-c)/y*i),s=0,c=0}return a}function o(e,t,n,o,s,a,c){var r=Math.floor((t-n)/C),h=r,d=[0,0,0];"undefined"!=typeof o&&o&&(d=i(n,o,s,a,c));for(var l=0;l<3;++l){if(s[l]+d[l]>e[l]+h)return[!1,l,s[l]+d[l]-e[l]-h];h=e[l]+h-(s[l]+d[l])}return[!0]}function s(e,t,n){var i=0,o="undefined"!=typeof e.clearDisasterTime?e.clearDisasterTime:(new Date).getTime();if("undefined"!=typeof e.disasterTime&&o>e.disasterTime&&(1===e.disasterType||3===e.disasterType)){var s=o-e.disasterTime,a=Math.floor(s/C/y);i=a*t.effect1,i=Math.min(i,t.maxEffect1),i=Math.floor(n.output*i)}return i}cc._RFpush(t,"0c2e7ISWOdImp7YKyyaFh8m","gameLayer");var a=1,c=2,r=3,h=4,d=5,l=6,u=7,p=8,m=9,g=10,f=0,v=1,b=2,C=6e4,y=60;cc.Class({"extends":cc.Component,properties:{landsPrefab:cc.Prefab,opertorBtnPrefab:cc.Prefab,cangKuSpr:cc.Sprite,heChengGongChang:cc.Sprite,refreshSecond:{"default":30,type:cc.Float}},onLoad:function(){this.scrollView=this.node.getComponent("cc.ScrollView"),this.content=this.scrollView.content,this.lands=this.content.getChildByName("lands"),this.touchNode=this.content.getChildByName("touchNode"),this.scrollView.horizontal=!1,this.scrollView.vertical=!1,this.ReLoadFunc=null,this.OperatorFunc=null,this.OnClearDisasterFunc=null,GameEvent().OnEvent("LoginSuccess",this.OnLoginSuccess,this),GameEvent().OnEvent("NeedCancelSelectLand",this.OnCancelSelectLand,this),GameEvent().OnEvent("EnterHome",this.OnEnterHome,this),GameEvent().OnEvent("VisitHome",this.OnVisitHome,this)},OnEnterHome:function(){GameEvent().OnEvent("UpdateBaseData",this.WarpReloadData,this),GameEvent().OnEvent("UpdateLands",this.WarpReloadData,this),GameEvent().OnEvent("UserSowSeeds",this.OnUserSowSeed,this),GameEvent().OnEvent("UserManure",this.OnUserManure,this),this.ReLoadFunc=this.ReLoadData,this.OperatorFunc=this.OperatorSelfLands,this.OnClearDisasterFunc=this.OnClearDisaster,this.cangKuSpr.node.targetOff(this),this.cangKuSpr.node.on(cc.Node.EventType.TOUCH_END,function(e){GameEvent().SendEvent("OpenWarehouse")}.bind(this),this),this.heChengGongChang.node.targetOff(this),this.heChengGongChang.node.on(cc.Node.EventType.TOUCH_END,function(e){GameEvent().SendEvent("OpenHeChengGongChang")}.bind(this),this),this.OnCancelSelectLand()},OnVisitHome:function(){GameEvent().OffEvent("UpdateBaseData",this.WarpReloadData,this),GameEvent().OffEvent("UpdateLands",this.WarpReloadData,this),GameEvent().OffEvent("UserSowSeeds",this.OnUserSowSeed,this),GameEvent().OffEvent("UserManure",this.OnUserManure,this),GameEvent().OnEvent("VisitUserLands",this.WarpReloadData,this),this.ReLoadFunc=this.VisitReLoadData,this.OperatorFunc=this.OperatorVisiUserLands,this.OnClearDisasterFunc=this.OnClearVisitUserDisaster,this.cangKuSpr.node.targetOff(this),this.cangKuSpr.node.on(cc.Node.EventType.TOUCH_END,function(){},this),this.heChengGongChang.node.targetOff(this),this.heChengGongChang.node.on(cc.Node.EventType.TOUCH_END,function(){},this),this.OnCancelSelectLand()},start:function(){for(var e,t=0;t<4;++t)for(var n=0;n<3;++n){var i=window.GridToCoord(n,t);e=cc.instantiate(this.landsPrefab),e.x=i.x,e.y=i.y,e.getChildByName("tips").active=!1,this.lands.addChild(e)}},OnCancelSelectLand:function(){"undefined"!=typeof this.lastHightLight&&(this.HightLightLandsPrefab(this.lastHightLight,this.selectLandIndex,!1),this.lastHightLight=void 0,this.selectLandIndex=-1)},OnLoginSuccess:function(){this.scrollView.horizontal=!0,this.scrollView.vertical=!0,this.selectLandIndex=-1,this.ReLoadData(),this.touchNode.on(cc.Node.EventType.TOUCH_END,function(e){var t=this.lands.convertToNodeSpaceAR(e.getLocation()),n=window.CoordToGrid(t.x,t.y);if(n.x>=0&&n.x<3&&n.y>=0&&n.y<4){var i=n.x+3*n.y;if(i<12){var o=this.lands.children,s=o[i];"undefined"!=typeof this.lastHightLight&&this.HightLightLandsPrefab(this.lastHightLight,i,!1);var a=AudioMng();a&&a.playButton(),this.HightLightLandsPrefab(s,i,!0),this.lastHightLight=s,this.selectLandIndex=i}}else this.OnCancelSelectLand()}.bind(this))},WarpReloadData:function(){this.ReLoadFunc&&this.ReLoadFunc()},ReLoadData:function(){for(var e=window.GameData,t=e.lands,n=this.lands.children,i=0;i<n.length;++i)this.InitLandsPrefab(n[i],t[i],t.length===i)},VisitReLoadData:function(){var e=window.GameData,t=e.visitUser.lands;null===t&&(t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]);for(var n=this.lands.children,i=0;i<n.length;++i)this.InitLandsPrefab(n[i],t[i],t.length===i)},InitLandsPrefab:function(e,t,n){if("undefined"==typeof t)e.getChildByName("lands2").active=!0,e.getChildByName("lands1").active=!1,e.getChildByName("plant").active=!1,e.getChildByName("disaster").active=!1,e.getChildByName("time").active=!1;else if(e.getChildByName("lands2").active=!1,e.getChildByName("lands1").active=!0,e.getChildByName("disaster").active=!1,e.getChildByName("time").active=!1,0===t.state)e.getChildByName("plant").active=!1;else if(1===t.state){e.getChildByName("plant").active=!0;var i=Table.GetEntry("plant",t.seedId);if(i){var a=Table.GetEntry("disaster",i.disasterId);if(null===a)return;var c=e.getChildByName("time");c.active=!0;var r=c.getComponent(cc.Label);if("undefined"!=typeof t.disasterTime&&"undefined"==typeof t.clearDisasterTime){e.getChildByName("disaster").active=!0;var h=e.getChildByName("disaster").getComponent(cc.Sprite),d="disaster"+t.disasterType;cc.loader.loadRes(d,cc.SpriteFrame,function(e,t){h.spriteFrame=t})}var l="undefined"!=typeof t.disasterTime&&2===t.disasterType||3===t.disasterType?t.disasterTime:null,u="undefined"==typeof t.reduceTime?[0,0,0]:t.reduceTime,p=(new Date).getTime(),m=o(u,p,t.sowTime,l,i.time.part,a.effect2,t.clearDisasterTime),g=e.getChildByName("plant").getComponent(cc.Sprite),f="plant/"+i.time.images[0];if(m[0]){var v=s(t,a,i),b="undefined"==typeof t.stealCount?i.output:i.output-t.stealCount;r.string="植物已经成熟\n("+(b-v)+"/"+i.output+")",f="plant/"+i.time.images[3]}else{var C,S=m[1],L=m[2];0===S?(C="发芽",f="plant/"+i.time.images[0]):1==S?(C="开花",f="plant/"+i.time.images[1]):(C="结果",f="plant/"+i.time.images[2]);var O=Math.floor(L/y);r.string="剩余"+(O>0?O+"小时":"")+Math.floor(L%y)+"分钟"+C}cc.loader.loadRes(f,cc.SpriteFrame,function(e,t){g.spriteFrame=t})}}else if(2===t.state){var c=e.getChildByName("time");c.active=!0;var r=c.getComponent(cc.Label);r.string="果实已收割",e.getChildByName("plant").active=!0;var i=Table.GetEntry("plant",t.seedId),g=e.getChildByName("plant").getComponent(cc.Sprite),f="plant/"+i.time.images[4];cc.loader.loadRes(f,cc.SpriteFrame,function(e,t){g.spriteFrame=t})}e.getChildByName("openLands").active=n},HightLightLandsPrefab:function(e,t,n){var i,o;n?(i=e.getChildByName("lands1"),i.active&&(i.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE),o=e.getChildByName("lands2"),o.active&&(o.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE),this.WrapOperatorLands(e,t)):(i=e.getChildByName("lands1"),i.active&&(i.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA),o=e.getChildByName("lands2"),o.active&&(o.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA),this.CancelOperatorLands(e))},WrapOperatorLands:function(e,t){this.OperatorFunc&&this.OperatorFunc(e,t)},OperatorSelfLands:function(e,t){var n=window.GameData,i=n.lands;if(i.length>t){var s=i[t],m=e.getChildByName("caozuobg");m.active=!0;var C=e.getChildByName("levelLab");C.string="等级："+s.level,C.active=!0;var y=e.getChildByName("caozuobtnAddNode");if(y.removeAllChildren(),y.active=!0,s.state===f){var S=this.CreateOpertorButton(g);y.addChild(S),this.SetTheBtnPos(S,1,2);var L=this.CreateOpertorButton(a);y.addChild(L),this.SetTheBtnPos(L,2,2)}else if(s.state===v){var O,B=!1,w=Table.GetEntry("plant",s.seedId),I=Table.GetEntry("disaster",w.disasterId);if(null===I)return;"undefined"!=typeof s.disasterType&&"undefined"==typeof s.clearDisasterTime&&(1===s.disasterType?(O=this.CreateOpertorButton(p),y.addChild(O),B=!0):2===s.disasterType?(O=this.CreateOpertorButton(l),y.addChild(O),B=!0):3===s.disasterType&&(O=this.CreateOpertorButton(u),y.addChild(O),B=!0));var P,N="undefined"!=typeof s.disasterTime&&2===s.disasterType||3===s.disasterType?s.disasterTime:null,G="undefined"==typeof s.reduceTime?[0,0,0]:s.reduceTime,E=(new Date).getTime(),T=o(G,E,s.sowTime,N,w.time.part,I.effect2,s.clearDisasterTime);T[0]?"undefined"!=typeof s.disasterType&&"undefined"==typeof s.clearDisasterTime||(P=this.CreateOpertorButton(d),y.addChild(P)):(P=this.CreateOpertorButton(h),y.addChild(P));var H=this.CreateOpertorButton(c);y.addChild(H);var x=this.CreateOpertorButton(r);y.addChild(x);var R=3;B===!0&&(R=4,this.SetTheBtnPos(O,4,R)),this.SetTheBtnPos(P,1,R),this.SetTheBtnPos(H,2,R),this.SetTheBtnPos(x,3,R)}else if(s.state===b){var H=this.CreateOpertorButton(c);y.addChild(H),this.SetTheBtnPos(H,1,2);var _=this.CreateOpertorButton(r);y.addChild(_),this.SetTheBtnPos(_,2,2)}}else n.lands.length===t&&GameEvent().SendEvent("OpenTuKuoJian",t)},OperatorVisiUserLands:function(e,t){
var n=window.GameData,i=n.visitUser.lands;if("undefined"!=typeof i&&null!==i&&i.length>t){var s=i[t];if(s.state===f);else if(s.state===v){var a=e.getChildByName("caozuobg");a.active=!0;var r=e.getChildByName("levelLab");r.string="等级："+s.level,r.active=!0;var h=e.getChildByName("caozuobtnAddNode");h.removeAllChildren(),h.active=!0;var d=0,g=this.CreateOpertorButton(c);h.addChild(g),d+=1;var b,C,y=!1,S=!1,L=Table.GetEntry("plant",s.seedId),O=Table.GetEntry("disaster",L.disasterId);if(null===O)return;"undefined"!=typeof s.disasterType&&"undefined"==typeof s.clearDisasterTime&&(1===s.disasterType?(b=this.CreateOpertorButton(p),h.addChild(b),y=!0,d+=1):2===s.disasterType?(b=this.CreateOpertorButton(l),h.addChild(b),y=!0,d+=1):3===s.disasterType&&(b=this.CreateOpertorButton(u),h.addChild(b),y=!0,d+=1));var B="undefined"!=typeof s.disasterTime&&2===s.disasterType||3===s.disasterType?s.disasterTime:null,w="undefined"==typeof s.reduceTime?[0,0,0]:s.reduceTime,I=(new Date).getTime(),P=o(w,I,s.sowTime,B,L.time.part,O.effect2,s.clearDisasterTime);P[0]&&(C=this.CreateOpertorButton(m),h.addChild(C),S=!0,d+=1),this.SetTheBtnPos(g,1,d);var N=2;S===!0&&(this.SetTheBtnPos(C,N,d),N+=1),y===!0&&this.SetTheBtnPos(b,N,d)}}},CancelOperatorLands:function(e){var t=e.getChildByName("caozuobg");t.active=!1;var n=e.getChildByName("levelLab");n.active=!1;var i=e.getChildByName("caozuobtnAddNode");i.removeAllChildren(),i.active=!1},CreateOpertorButton:function(e){var t,n=function(e,t){var n=e.getComponent("cc.Button");cc.loader.loadRes(t,cc.SpriteFrame,function(e,t){this.normalSprite=t,this.pressedSprite=t,this.hoverSprite=t,this.disabledSprite=t}.bind(n))},i=null;return e===a?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="播种",i.on("click",function(e){GameEvent().SendEvent("OpenPackage","sow")}),n(i,"operate/caozuo_bozhong")):e===c?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="详细信息",i.on("click",function(e){}),t.active=!1,n(i,"operate/caozuo_info")):e===r?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),i.on("click",function(e){this.OnUserRemovePlant()}.bind(this)),t.active=!1,n(i,"operate/caozuo_canchu")):e===h?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="施肥",i.on("click",function(e){GameEvent().SendEvent("OpenPackage","manure")}),t.active=!1,n(i,"operate/caozuo_shifei")):e===d?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="收割果实",i.on("click",function(e){this.OnUserHarvest()}.bind(this)),t.active=!1,n(i,"operate/caozuo_shouhuo")):e===l?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="浇水",i.on("click",function(e){this.OnWrapClearDisaster()}.bind(this)),t.active=!1,n(i,"operate/caozuo_huli")):e===u?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="补充营养",i.on("click",function(e){this.OnWrapClearDisaster()}.bind(this)),t.active=!1,n(i,"operate/caozuo_huli")):e===p?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="除虫",i.on("click",function(e){this.OnWrapClearDisaster()}.bind(this)),t.active=!1,n(i,"operate/caozuo_huli")):e===m?(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="偷盗",i.on("click",function(e){this.OnUserVisitSteal()}.bind(this)),t.active=!1,n(i,"operate/caozuo_shouhuo")):e===g&&(i=cc.instantiate(this.opertorBtnPrefab),t=i.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="升级",i.on("click",function(e){this.OnLandsUpgread()}.bind(this)),t.active=!1,n(i,"operate/caozuo_levelup")),i},OnUserSowSeed:function(e){var t=e.detail;if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var n=this.selectLandIndex,i={type:"sowSeeds",seedId:t,landIndex:n},o=JSON.stringify(i);GameSocket().Send(o)}},OnUserManure:function(e){var t=e.detail;if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var n=this.selectLandIndex,i={type:"manure",propertyId:t,landIndex:n},o=JSON.stringify(i);GameSocket().Send(o)}},OnUserRemovePlant:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n={type:"removePlant",landIndex:t},i=JSON.stringify(n);GameSocket().Send(i)}},OnUserHarvest:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n={type:"harvest",landIndex:t},i=JSON.stringify(n);GameSocket().Send(i)}},OnUserVisitSteal:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n=window.GameData,i=n.visitUser.userid,o={type:"visitSteal",visitUserId:i,landIndex:t},s=JSON.stringify(o);GameSocket().Send(s)}},OnWrapClearDisaster:function(e){this.OnClearDisasterFunc&&this.OnClearDisasterFunc(e)},OnClearDisaster:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n={type:"clearDisaster",landIndex:t},i=JSON.stringify(n);GameSocket().Send(i)}},OnClearVisitUserDisaster:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n=window.GameData,i=n.visitUser.userid,o={type:"visitClearDisaster",visitUserId:i,landIndex:t},s=JSON.stringify(o);GameSocket().Send(s)}},OnLandsUpgread:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex;GameEvent().SendEvent("OpenTuLevelUp",t)}},update:function(e){"undefined"==typeof this.interval&&(this.interval=0),this.interval+=e;var t=this.refreshSecond/60;this.interval>t&&(this.ReLoadFunc&&this.ReLoadFunc(),this.interval-=t)},SetTheBtnPos:function(e,t,n){"undefined"!=typeof e&&null!==e&&(1===n?1===t&&e.setPosition(0,100):2===n?1===t?e.setPosition(-100,0):2===t&&e.setPosition(100,0):3===n?1===t?e.setPosition(0,100):2===t?e.setPosition(87,-50):3===t&&e.setPosition(-87,-50):4===n&&(1===t?e.setPosition(-100,0):2===t?e.setPosition(0,100):3===t?e.setPosition(100,0):4===t&&e.setPosition(0,-100)))}}),cc._RFpop()},{}],getLogs:[function(e,t,n){"use strict";cc._RFpush(t,"9f16fhfDRVO/5jhAu5TSSaM","getLogs");var i=e("msgHandler"),o={};o.interest="getLogsSuccess",o.Process=function(e){var t=window.GameData;t.logs=e.logs.slice(),GameEvent().SendEvent("UpdateLogs")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],getMsgs:[function(e,t,n){"use strict";cc._RFpush(t,"0c1bcupcrpCE6UqcIVdaQIa","getMsgs");var i=e("msgHandler"),o={};o.interest="getMsgsSuccess",o.Process=function(e){var t=window.GameData;t.msgs=e.msgs.slice(),GameEvent().SendEvent("UpdateMsgs")},i.Add(o);var s={};s.interest="visitMessageSuccess",s.Process=function(e){var t=window.GameData;t.msgs.push(e.newChat),GameEvent().SendEvent("UpdateMsgs")},i.Add(s),cc._RFpop()},{msgHandler:"msgHandler"}],goBack:[function(e,t,n){"use strict";cc._RFpush(t,"fcc0bo3P7ZASLOdUssCc8Qe","goBack"),cc.Class({"extends":cc.Component,properties:{goBackBtn:cc.Button},onLoad:function(){this.goBackBtn.node.on("click",this.OnGoBack,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnGoBack:function(){GameEvent().SendEvent("EnterHome"),GameEvent().SendEvent("UpdateLands"),GameEvent().SendEvent("UpdateUserInfo")}}),cc._RFpop()},{}],harvestLands:[function(e,t,n){"use strict";cc._RFpush(t,"4e41d4UI4ZAjJBpR13emG8I","harvestLands");var i=e("msgHandler"),o={};o.interest="harvestSuccess",o.Process=function(e){GameNotify().AddText("收割成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],hechengHandler:[function(e,t,n){"use strict";cc._RFpush(t,"9e48d0NlmFL0JPpJbxpx/uX","hechengHandler");var i=e("msgHandler"),o={};o.interest="hechengPropSuccess",o.Process=function(e){GameNotify().AddText("合成道具成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],hecheng:[function(e,t,n){"use strict";cc._RFpush(t,"f05cdaEuUNHoKiUiVQR1TKt","hecheng"),cc.Class({"extends":cc.Component,properties:{propItem:cc.Prefab,cailiaoItem:cc.Prefab,propItemScroll:cc.ScrollView,duihuanBtn:cc.Button,propNameLab:cc.Label,propImag:cc.Sprite,buzutishiLab:cc.Label,hechengGoldLab:cc.Label,cailiaoScroll:cc.ScrollView,hechengBtn:cc.Button,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),this.duihuanBtn.node.on("click",this.OnDuiHuan,this),this.hechengBtn.node.on("click",this.OnHeCheng,this),this.propItemScroll.scrollToTop(.1),this.cailiaoScroll.scrollToTop(.1),GameEvent().OnEvent("UpdatePackage",this.Load,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){var e=this.propItemScroll.content;e.removeAllChildren();var t=this.cailiaoScroll.content;t.removeAllChildren();var n=new Array,i=new Array,o=Table.GetEntry("hechenglayer",1);if(o&&o.items.length>0)for(var s=0;s<o.items.length;++s){var a=o.items[s];this.IsCanHeCheng(a)?n.push(a):i.push(a)}this.haveShowInit=!1;for(var s=0;s<n.length;s++)this.AddHeChengPropItem(n[s],!0);for(var s=0;s<i.length;s++)this.AddHeChengPropItem(i[s],!1);this.propItemScroll.scrollToTop(.1),this.cailiaoScroll.scrollToTop(.1)}},IsCanHeCheng:function(e){var t=!0,n=Table.GetEntry("hechengProp",e),i=window.GameData;if(i.GetMoney()<n.money&&(t=!1),t===!0)for(var o=0;o<n.cailiao.length;++o){var s=n.cailiao[o].id;if(this.IsHaveEoughCaiLiao(s,n.cailiao[o].count)===!1){t=!1;break}}return t},IsHaveEoughCaiLiao:function(e,t){var n=this.GetCaiLiaoHaveNum(e);return!(n<t)},GetCaiLiaoHaveNum:function(e){var t=0,n=window.GameData;return"undefined"!=typeof n["package"][2][e]&&(t=n["package"][2][e]),t},AddHeChengPropItem:function(e,t){var n,i,o=this.propItemScroll.content;n=Table.GetEntry("hechengProp",e),i=cc.instantiate(this.propItem),this.InitPropfab.bind(this)(i,n,t),o.addChild(i)},InitPropfab:function(e,t,n){var i=e.getChildByName("propHeadImag").getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(i));var o=e.getChildByName("propNameLab").getComponent("cc.Label");o.string=t.name;var s=e.getChildByName("propState_cailiaobuzu").getComponent(cc.Sprite),a=e.getChildByName("propState_kehecheng").getComponent(cc.Sprite);s.node.active=!1,a.node.active=!1,n===!0?a.node.active=!0:s.node.active=!0;var c=0,r=window.GameData;"undefined"!=typeof r["package"][3]&&"undefined"!=typeof r["package"][3][t.id]&&(c=r["package"][3][t.id]);var h=e.getChildByName("propNumLab").getComponent("cc.Label");h.string=c,this.haveShowInit===!1&&(this.haveShowInit=!0,this.ShowPropInfo(t,n)),e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowPropInfo(t,n)}.bind(this))},ShowPropInfo:function(e,t){this.nowShowPropConfig=e;var n=this.propNameLab.getComponent("cc.Label");n.string=e.name;var i=this.propImag.getComponent("cc.Sprite");cc.loader.loadRes(e.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(i));this.buzutishiLab.getComponent("cc.Label");t===!0?(this.buzutishiLab.node.active=!1,this.hechengBtn.enabled=!0):(this.buzutishiLab.node.active=!0,this.hechengBtn.enabled=!1);var o=this.hechengGoldLab.getComponent("cc.Label");o.string=e.money+"金币";var s=this.cailiaoScroll.content;if(s.removeAllChildren(),e.cailiao.length>0)for(var a=0;a<e.cailiao.length;++a){var c=e.cailiao[a].id;this.ShowCaiLiaoScroll(c,e.cailiao[a].count)}this.cailiaoScroll.scrollToTop(.1)},ShowCaiLiaoScroll:function(e,t){var n,i,o=this.cailiaoScroll.content;n=Table.GetEntry("plant",e),i=cc.instantiate(this.cailiaoItem),this.InitCaiLiaofab.bind(this)(i,n,t),o.addChild(i)},InitCaiLiaofab:function(e,t,n){var i=this.GetCaiLiaoHaveNum(t.id),o=e.getChildByName("caiLiaoInfoLab"),s=o.getComponent("cc.Label");s.string=t.name+" : "+i+"/"+n,i<n&&(o.color=cc.Color.RED)},OnDuiHuan:function(){this.OnHide(),GameEvent().SendEvent("OpenDuiHuanShop",0)},OnHeCheng:function(){var e={type:"hechengProp",propId:this.nowShowPropConfig.id,propCount:1},t=JSON.stringify(e);GameSocket().Send(t)},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}],info:[function(e,t,n){"use strict";cc._RFpush(t,"500c7bFHShCj5AZu+ZpNbsG","info"),cc.Class({"extends":cc.Component,properties:{roleName:cc.Label,level:cc.Label,money:cc.Label,expProgress:cc.ProgressBar,bgSprite:cc.Sprite},onLoad:function(){GameEvent().OnEvent("EnterHome",this.OnEnterHome,this),GameEvent().OnEvent("VisitHome",this.OnVisitHome,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnClickBg:function(){GameEvent().SendEvent("OpenDetail")},OnEnterHome:function(){GameEvent().OnEvent("UpdateBaseData",this.ReLoadData,this),GameEvent().OnEvent("UpdateUserInfo",this.ReLoadData,this),GameEvent().OffEvent("UpdateVisitInfo",this.VisitReLoadData,this),this.bgSprite.node.on(cc.Node.EventType.TOUCH_END,this.OnClickBg,this)},OnVisitHome:function(){GameEvent().OffEvent("UpdateBaseData",this.ReLoadData,this),GameEvent().OffEvent("UpdateUserInfo",this.ReLoadData,this),GameEvent().OnEvent("UpdateVisitInfo",this.VisitReLoadData,this),this.bgSprite.node.off(cc.Node.EventType.TOUCH_END,this.OnClickBg,this)},ReLoadData:function(){var e=window.GameData;this.roleName.string=e.GetUserName()+"的家园",this.money.string=e.GetMoney(),this.level.string="Lv."+e.GetLevel(),this.expProgress.progress=e.GetLevelExp()/e.GetLevelExpMax();var t=this.expProgress.node.getChildByName("value").getComponent("cc.Label");t.string=e.GetLevelExp()+"/"+e.GetLevelExpMax()},VisitReLoadData:function(e){var t=e.detail,n=window.GameData;this.roleName.string=t.username+"的家园",this.money.string=t.money,this.level.string="Lv."+n.GetLevelByExp(t.experience),this.expProgress.progress=n.GetLevelExpByExp(t.experience)/n.GetLevelExpMax();var i=this.expProgress.node.getChildByName("value").getComponent("cc.Label");i.string=n.GetLevelExpByExp(t.experience)+"/"+n.GetLevelExpMax()}}),cc._RFpop()},{}],loginHandler:[function(e,t,n){"use strict";cc._RFpush(t,"dc886cpH0JA95NAuisHz8Rb","loginHandler");var i=e("msgHandler"),o={};o.interest="loginSuccess",o.Process=function(e){GameEvent().SendEvent("LoginSuccess")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],login:[function(e,t,n){"use strict";cc._RFpush(t,"69ac94zGKRA/rekHALWuDIK","login"),cc.Class({"extends":cc.Component,properties:{loginBtn:cc.Button,registerBtn:cc.Button,inputAccount:cc.EditBox,inputPassword:cc.EditBox},onLoad:function(){this.loginBtn.node.on("click",this.OnLogin,this),this.registerBtn.node.on("click",this.OnRegister,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnLogin:function(e){if(0===this.inputAccount.string.length)return void GameNotify().AddText("请输入账号");if(0===this.inputPassword.string.length)return void GameNotify().AddText("请输入密码 ");var t={type:"login",account:this.GetAccount(),password:this.GetPassword()},n=JSON.stringify(t);GameSocket().Send(n)},OnRegister:function(e){GameEvent().SendEvent("GoRegister")},GetAccount:function(){return this.inputAccount.string},GetPassword:function(){return this.inputPassword.string}}),cc._RFpop()},{}],main:[function(e,t,n){"use strict";cc._RFpush(t,"f6babQhRldN7qU5r2qiWXpj","main"),cc.Class({"extends":cc.Component,properties:{infoPnl:cc.Node,toolbarPnl:cc.Node,loginPnl:cc.Node,registerPnl:cc.Node,shopPnl:cc.Node,packagePnl:cc.Node,buySeedPnl:cc.Node,buyPropPnl:cc.Node,sellFruitPnl:cc.Node,warehousePnl:cc.Node,socialPnl:cc.Node,visitPnl:cc.Node,goBackPnl:cc.Node,detailPnl:cc.Node,petPnl:cc.Node,hechengGongChangPnl:cc.Node,duihuanPnl:cc.Node,duihuanyouxiPnl:cc.Node,tudiLevelUpPnl:cc.Node,tudiKuoJianPnl:cc.Node,chatPnl:cc.Node,msgPnl:cc.Node,chatButton:cc.Button},onLoad:function(){this.HideAllPnl(),GameLog("main onLoad");window.AudioMng()},start:function(){GameSocket().Connect(window.GameHost,window.GamePort),ChatSocket().Connect(window.ChatHost,window.ChatPort),GameEvent().OnEvent("connectedServer",this.OnConectServe,this),GameEvent().OnEvent("GoRegister",this.OnGoRegister,this),GameEvent().OnEvent("LoginSuccess",this.OnLoginSuccess,this),GameEvent().OnEvent("CancelRegister",this.OnCancelRegister,this),GameEvent().OnEvent("RegisterSuccess",this.OnRegisterSuccess,this),GameEvent().OnEvent("BuyItemsSuccess",this.OnBuyItemsSuccess,this),GameEvent().OnEvent("OpenShop",this.OnOpenShop,this),GameEvent().OnEvent("OpenPackage",this.OnOpenPackage,this),GameEvent().OnEvent("OpenBuySeed",this.OnOpenBuySeed,this),GameEvent().OnEvent("OpenBuyProperty",this.OnOpenBuyProperty,this),GameEvent().OnEvent("OpenWarehouse",this.OnOpenWarehouse,this),GameEvent().OnEvent("OpenSellFruit",this.OnOpenSellFruit,this),GameEvent().OnEvent("OpenPet",this.OnOpenPet,this),GameEvent().OnEvent("OpenDetail",this.OnOpenDetail,this),GameEvent().OnEvent("OpenHeChengGongChang",this.OnOpenHeChengGongChang,this),GameEvent().OnEvent("OpenDuiHuanShop",this.OnOpenDuiHuanShop,this),GameEvent().OnEvent("OpenDuiHuanYouJi",this.OnOpenDuiHuanYouJi,this),GameEvent().OnEvent("OpenTuLevelUp",this.OnOpenTuLevelUp,this),GameEvent().OnEvent("OpenTuKuoJian",this.OnOpenTuKuoJian,this),GameEvent().OnEvent("OpenMessageBox",this.OnOpenMessageBox,this),GameEvent().OnEvent("EnterHome",this.OnEnterHome,this),GameEvent().OnEvent("VisitHome",this.OnVisitHome,this)},OnEnterHome:function(){this.visitPnl.getComponent("visit").OnHide(),this.goBackPnl.getComponent("goBack").OnHide(),this.toolbarPnl.getComponent("toolbar").OnShow(),"undefined"!=typeof GameData.visitUser.userid&&ChatSocket().Send("leaveRoom",{roomId:GameData.visitUser.userid}),GameData.GetUserId()>=0&&ChatSocket().Send("enterRoom",{roomId:GameData.GetUserId()})},OnVisitHome:function(){this.visitPnl.getComponent("visit").OnShow(),this.goBackPnl.getComponent("goBack").OnShow(),this.toolbarPnl.getComponent("toolbar").OnHide(),ChatSocket().Send("leaveRoom",{roomId:GameData.GetUserId()}),ChatSocket().Send("enterRoom",{roomId:GameData.visitUser.userid})},HideAllPnl:function(){this.infoPnl.getComponent("info").OnHide(),this.toolbarPnl.getComponent("toolbar").OnHide(),this.loginPnl.getComponent("login").OnHide(),this.registerPnl.getComponent("register").OnHide(),this.shopPnl.getComponent("shop").OnHide(),this.packagePnl.getComponent("package").OnHide(),this.buySeedPnl.getComponent("buySeed").OnHide(),this.buyPropPnl.getComponent("buyProperty").OnHide(),this.sellFruitPnl.getComponent("sellFruit").OnHide,this.warehousePnl.getComponent("warehouse").OnHide(),this.petPnl.getComponent("petLayer").OnHide(),this.chatPnl.getComponent("chat").OnHide(),this.msgPnl.getComponent("message").OnHide(),this.chatButton.node.active=!1},OnConectServe:function(e){GameLog("OnConectServe"),this.loginPnl.getComponent("login").OnShow()},OnGoRegister:function(e){this.loginPnl.getComponent("login").OnHide(),this.registerPnl.getComponent("register").OnShow()},OnLoginSuccess:function(e){GameLog("登录成功"),this.HideAllPnl(),this.infoPnl.getComponent("info").OnShow(),this.toolbarPnl.getComponent("toolbar").OnShow(),this.socialPnl.getComponent("social").OnShow(),this.chatButton.node.active=!0,this.chatButton.node.on("click",this.OnOpenChatBox,this),GameEvent().SendEvent("EnterHome")},OnCancelRegister:function(e){this.loginPnl.getComponent("login").OnShow(),this.registerPnl.getComponent("register").OnHide()},OnRegisterSuccess:function(e){this.loginPnl.getComponent("login").OnShow(),this.registerPnl.getComponent("register").OnHide()},OnBuyItemsSuccess:function(e){this.buySeedPnl.getComponent("buySeed").OnHide(),this.buyPropPnl.getComponent("buyProperty").OnHide()},OnOpenShop:function(e){var t=this.shopPnl.getComponent("shop");t.OnShow(),t.Setup(e.detail),GameEvent().SendEvent("NeedCancelSelectLand")},OnOpenPackage:function(e){var t=this.packagePnl.getComponent("package");t.OnShow(),t.OpenWith(e.detail)},OnOpenBuySeed:function(e){var t=this.buySeedPnl.getComponent("buySeed");t.OnShow(),t.Setup(e.detail)},OnOpenBuyProperty:function(e){var t=this.buyPropPnl.getComponent("buyProperty");t.OnShow(),t.Setup(e.detail)},OnOpenWarehouse:function(e){var t=this.warehousePnl.getComponent("warehouse");t.OnShow(),GameEvent().SendEvent("NeedCancelSelectLand")},OnOpenSellFruit:function(e){var t=this.sellFruitPnl.getComponent("sellFruit");t.OnShow(),t.Setup(e.detail)},OnOpenPet:function(e){var t=this.petPnl.getComponent("petLayer");t.OnShow(),GameEvent().SendEvent("NeedCancelSelectLand")},OnOpenDetail:function(e){var t=this.detailPnl.getComponent("detail");t.OnShow()},OnOpenHeChengGongChang:function(e){var t=this.hechengGongChangPnl.getComponent("hecheng");t.OnShow(),GameEvent().SendEvent("NeedCancelSelectLand")},OnOpenDuiHuanShop:function(e){var t=this.duihuanPnl.getComponent("duihuan");t.Setup(e.detail),t.OnShow()},OnOpenDuiHuanYouJi:function(e){var t=this.duihuanyouxiPnl.getComponent("duihuanyouji");t.OnShow()},OnOpenTuLevelUp:function(e){var t=this.tudiLevelUpPnl.getComponent("tudiLevelUp");t.Setup(e.detail),t.OnShow()},OnOpenTuKuoJian:function(e){var t=this.tudiKuoJianPnl.getComponent("tudikuojian");t.Setup(e.detail),t.OnShow()},OnOpenMessageBox:function(e){var t=this.msgPnl.getComponent("message");t.Setup(e.detail),t.OnShow()},OnOpenChatBox:function(e){var t=this.chatPnl.getComponent("chat");t.OnShow()}}),cc._RFpop()},{}],manureLands:[function(e,t,n){"use strict";cc._RFpush(t,"19dd9UWpJ1Il7IACP7pUdMq","manureLands");var i=e("msgHandler"),o={};o.interest="manureSuccess",o.Process=function(e){GameNotify().AddText("施肥成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],maskLayer:[function(e,t,n){"use strict";cc._RFpush(t,"b1c74rq4bhEX4QlqH8KfxeH","maskLayer"),cc.Class({"extends":cc.Component,onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_END,function(e){})}}),cc._RFpop()},{}],message:[function(e,t,n){"use strict";cc._RFpush(t,"1e3c0dMyFNE16/3DR6dutXH","message"),cc.Class({"extends":cc.Component,properties:{_time:cc.Float,input:cc.EditBox,scrollViewL:cc.ScrollView,scrollViewR:cc.ScrollView,headPrefab:cc.Prefab,msgLPrefab:cc.Prefab,msgRPrefab:cc.Prefab,_selectKey:{"default":null,type:Object}},onLoad:function(){this._time=0,this.input.stirng="",GameEvent().OnEvent("UpdateMsgs",this.ReLoad,this)},OnClose:function(){this.OnHide()},Setup:function(e){this._selectKey=e},OnShow:function(){this.node.active=!0,this.RequstMsgs()},OnHide:function(){this.node.active=!1,this._selectKey=null},RequstMsgs:function(){var e={type:"getMsgs"},t=JSON.stringify(e);GameSocket().Send(t)},ReLoad:function(){function e(e,t){return e.time>t.time}var t=window.GameData,n=t.msgs;this.msgList={};for(var i,o=0;o<n.length;++o)i=n[o].userId!==t.userId?n[o].userId:n[o].toUserId,"undefined"==typeof this.msgList[i]&&(this.msgList[i]=new Array),this.msgList[i].push(n[o]);var s=this.scrollViewL.content;s.removeAllChildren();for(var a in this.msgList)if("undefined"!=typeof this.msgList[a]){this.msgList[a].sort(e);var c=cc.instantiate(this.headPrefab);this.InitHeadPrefab(c,this.msgList[a][0]),null===this._selectKey&&(this._selectKey=parseInt(a)),s.addChild(c)}"number"==typeof this._selectKey&&this.OnSelectUser(this._selectKey)},InitHeadPrefab:function(e,t){var n=JSON.parse(t.data),i=window.GameData,o=t.userId!==i.userId?n[0]:n[1],s=t.userId!==i.userId?t.userId:t.toUserId,a=e.getChildByName("name").getComponent(cc.Label);a.string=o;var c=new Date,r=new Date(t.time),h="";c.getFullYear()===r.getFullYear()&&c.getMonth()===r.getMonth()&&(c.getDate()===r.getDate()?h="今天":c.getDate()-1===r.getDate()&&(h="昨天")),0===h.length&&(h+=r.getMonth()<9?"0"+(r.getMonth()+1):r.getMonth()+1,h+="-",h+=r.getDate()<10?"0"+(r.getDate()+1):r.getDate());var d=r.getHours();h+=d<9?" 0"+d:" "+d;var l=r.getMinutes();h+=l<9?":0"+l:":"+l;var u=e.getChildByName("time").getComponent(cc.Label);u.string=h,e.getChildByName("msg_counts").active=!1;var p=e.getChildByName("head").getComponent(cc.Sprite);p.node.userId=s,p.node.on(cc.Node.EventType.TOUCH_END,function(e){this.OnVisitUser(e)}.bind(this)),e.userId=s,e.on(cc.Node.EventType.TOUCH_END,function(e){this.OnSelectUser(e.target.userId)}.bind(this))},OnSelectUser:function(e){var t=this.scrollViewR.content;t.removeAllChildren();var n=window.GameData,e=e;if(this._selectKey=e,"undefined"!=typeof this.msgList[e]){var i,o,s,a,c=this.msgList[e];if("undefined"!=typeof c)for(var r=0;r<c.length;++r){o=JSON.parse(c[r].data),c[r].userId===n.userId?(i=cc.instantiate(this.msgRPrefab),s=o[0],a=i.getChildByName("msg_h-d")):(i=cc.instantiate(this.msgLPrefab),s=o[0],a=i.getChildByName("msg_s-d"));var h=i.getChildByName("name").getComponent(cc.Label);h.string=s+":";var d=a.getChildByName("label").getComponent(cc.Label);d.string=o[2],t.addChild(i)}this.scrollViewR.scrollToBottom(.1)}},OnVisitUser:function(e){this.OnHide();var t=e.target.userId,n={type:"visitHome",userId:t},i=JSON.stringify(n);GameSocket().Send(i)},OnSend:function(){if(this._time>1){if(this._time=0,this.input.string.length>0&&"number"==typeof this._selectKey){var e=this._selectKey,t={type:"visitMessage",toUserId:e,msg:this.input.string},n=JSON.stringify(t);GameSocket().Send(n),this.input.string=""}}else{var i=Table.GetEntry("error",26);i&&GameNotify().AddText(i.description,ErrorNotifyColor)}},update:function(e){this._time+=e}}),cc._RFpop()},{}],msgHandler:[function(e,t,n){"use strict";cc._RFpush(t,"bf199399u1H4Z4f07UIDO9L","msgHandler"),function(){var e={};e.Add=function(e){"string"==typeof e.interest&&"function"==typeof e.Process?(this[e.interest]=e.Process,GameLog("Add handler :"+e.interest)):GameLog("error type of handler"+e)},e.Process=function(e){"string"==typeof e.type&&"function"==typeof this[e.type]?this[e.type](e):GameLog("invalid massage ->>"+e)},"undefined"!=typeof t&&(t.exports=e),"undefined"!=typeof window&&(window.MessageHandler=e)}(),cc._RFpop()},{}],neighbourList:[function(e,t,n){"use strict";cc._RFpush(t,"cf5e4dgpbZOS7sEK+/Nrr8r","neighbourList");var i=e("msgHandler"),o={};o.interest="neighbourList",o.Process=function(e){var t=window.GameData;t.neighbourList=e.list.slice(),GameEvent().SendEvent("UpdateNeighbourList")},i.Add(o);var s={};s.interest="neighbourListSuccess",s.Process=function(e){var t=window.GameData;t.neighbourList=e.list.slice(),GameEvent().SendEvent("UpdateNeighbourList")},i.Add(s),cc._RFpop()},{msgHandler:"msgHandler"}],notifyText:[function(e,t,n){"use strict";cc._RFpush(t,"6311aEnqulPi492lRJveIXd","notifyText");var i=cc.Class({"extends":cc.Component,properties:{textPrefab:cc.Prefab},statics:{inst:null},onLoad:function(){i.inst=this,this.entityPool=new cc.NodePool;for(var e=5,t=0;t<e;++t){var n=cc.instantiate(this.textPrefab);this.entityPool.put(n)}},AddText:function(e,t,n){var i=null;i=this.entityPool.size()>0?this.entityPool.get():cc.instantiate(this.textPrefab),i.parent=this.node,i.color=t?t:cc.Color.GREEN;var o=i.getComponent("cc.Label");o.string=e,o.fontSize=n?n:30;var s=cc.director.getWinSize(),a=cc.moveBy(2,cc.p(0,s.height/8*3)),c=cc.fadeOut(1),r=cc.callFunc(this._RemoveText,this,i),h=cc.sequence(a,c,r);i.runAction(h)},_RemoveText:function(e){this.node.removeChild(e),this.entityPool.put(e)}});cc._RFpop()},{}],"package":[function(e,t,n){"use strict";cc._RFpush(t,"f19b3ye65tJmY2tT2nWSo9d","package");var i=0,o=1,s=2;cc.Class({"extends":cc.Component,properties:{seedPrefab:cc.Prefab,propertyPrefab:cc.Prefab,yingYnagPrefab:cc.Prefab,scrollView:cc.ScrollView,scrollbg_1:cc.Sprite,scrollbg_2:cc.Sprite,scrollbg_3:cc.Sprite,radioButton:{"default":[],type:cc.Toggle},_currentToggle:cc.Toggle,itemNode:cc.Node,itemImag:cc.Sprite,itemName:cc.Label,itemInfo:cc.Label,itemBtn:cc.Button,itemBtnLab:cc.Label,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),this.itemBtn.node.on("click",this.OnItemBtn,this);for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e],this.ShowTheScrollBG(e+1);break}GameEvent().OnEvent("UpdatePackage",this.Load,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=new Array(["plant",this.seedPrefab,this.InitSeedPrefab],["property",this.propertyPrefab,this.InitPropPrefab],["property",this.yingYnagPrefab,this.InitYingYangPrefab]),n=this.scrollView.content;if(n.removeAllChildren(),t.length>e){var i=window.GameData,o=i["package"],s=-1,a=e;if(2===e&&(a=1),"undefined"!=typeof o[a]){var c,r,h,d=!1;for(var l in o[a])o[a][l]>0&&(c=parseInt(l),r=Table.GetEntry(t[a][0],c),(0===e||1===e&&(1===r.type||2===r.type)||2===e&&3===r.type)&&(d===!1&&(d=!0,s=c),h=cc.instantiate(t[e][1]),t[e][2].bind(this)(h,r,o[a][l]),n.addChild(h)))}}this.scrollView.scrollToTop(.1),s===-1?this.itemNode.active=!1:0===e?this.ShowSeedItemInfo(s):1===e?this.ShowPropItemInfo(s):2===e?this.ShowPropItemInfo(s):this.itemNode.active=!1}}},ShowTheScrollBG:function(e){this.scrollbg_1.node.active=!1,this.scrollbg_2.node.active=!1,this.scrollbg_3.node.active=!1,1===e?this.scrollbg_1.node.active=!0:2===e?this.scrollbg_2.node.active=!0:3===e&&(this.scrollbg_3.node.active=!0)},OpenWith:function(e){"undefined"==typeof e?this.openReason=i:"sow"===e?(this.openReason=o,this.radioButton[0].check()):"manure"===e?(this.openReason=s,this.radioButton[1].check()):"guoshi"===e?(this.openReason=enum_reason_guoshi,this.radioButton[2].check()):this.openReason=i},InitSeedPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("level").getComponent("cc.Label");o.string=t.minLevel+"级";var s=e.getChildByName("count").getComponent("cc.Label");s.string=n,e.config=t;var a=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(a)),e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowSeedItemInfo(t.id)}.bind(this))},ShowSeedItemInfo:function(e){var t=Table.GetEntry("plant",e),n=this.itemImag.getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(n));var i=this.itemName.getComponent("cc.Label");i.string=t.name;var o="预产出："+t.output+"个",s="预营收："+t.output*t.fruit.price,a="预获经验："+(t.sowExp+t.harvestExp+t.clearExp),c="成熟时间："+t.time.amount/60+"小时",r=this.itemInfo.getComponent("cc.Label");r.string=o+"\n"+s+"\n"+a+"\n"+c;var h=this.itemBtnLab.getComponent("cc.Label");h.string="播种",this.showItemType=1,this.showItemConfig=t,this.itemNode.active=!0},InitPropPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("count").getComponent("cc.Label");o.string=n,e.config=t;var s=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(s)),e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowPropItemInfo(t.id)}.bind(this))},ShowPropItemInfo:function(e){var t=Table.GetEntry("property",e),n=this.itemImag.getComponent("cc.Sprite");cc.loader.loadRes(t.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(n));var i=this.itemName.getComponent("cc.Label");i.string=t.name;var o=this.itemInfo.getComponent("cc.Label");o.string=t.desc;var s=this.itemBtnLab.getComponent("cc.Label");s.string="使用",this.showItemType=2,this.showItemConfig=t,this.itemNode.active=!0},InitYingYangPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("count").getComponent("cc.Label");o.string=n,e.config=t;var s=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(s)),e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowPropItemInfo(t.id)}.bind(this))},radioButtonClicked:function(e){if(this._currentToggle!==e){this._currentToggle=e;var t=this.radioButton.indexOf(this._currentToggle);
this.ShowTheScrollBG(t+1),this.Load()}},OnSeedClick:function(e){this.openReason===o&&(this.OnHide(),GameEvent().SendEvent("UserSowSeeds",e.id))},OnPropertyClikc:function(e){this.openReason===s&&(this.OnHide(),GameEvent().SendEvent("UserManure",e.id))},OnClose:function(){this.OnHide()},OnItemBtn:function(){1===this.showItemType?this.OnSeedClick(this.showItemConfig):2===this.showItemType&&this.OnPropertyClikc(this.showItemConfig)}}),cc._RFpop()},{}],petLayer:[function(e,t,n){"use strict";cc._RFpush(t,"c68f40tLqlPFbihPADRlB+R","petLayer"),cc.Class({"extends":cc.Component,properties:{petItemPrefab:cc.Prefab,petScorllView:cc.ScrollView,petNameLab:cc.Label,petImag:cc.Sprite,petInfo:cc.Label,petEndTimeTitle:cc.Label,petEndTimeLab:cc.Label,xufeiBtn:cc.Button,tihuanBtn:cc.Button,buyBtn:cc.Button,closeBtn:cc.Button},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),this.xufeiBtn.node.on("click",this.OnXuFei,this),this.tihuanBtn.node.on("click",this.OnTiHuan,this),this.buyBtn.node.on("click",this.OnBuyPet,this),GameEvent().OnEvent("UpdatePet",this.Load,this)},Load:function(){if(this.node.active){var e=this.petScorllView.content;e.removeAllChildren();var t=window.GameData,n=t.pet.items,i=t.pet.activeId,o="-1",s=new Array,a=new Array,c=new Array;for(var r in n){var h=new Date,d=h.getTime(),l=n[r].validTime+n[r].buyTime;l>=d?n[r].id===i?o=r:s.push(r):a.push(r)}this.haveShowInit=!1,"-1"!=o&&this.AddThePetItems(o,2);for(var u=0;u<s.length;u++)this.AddThePetItems(s[u],1);for(var u=0;u<a.length;u++)this.AddThePetItems(a[u],3);var p=Table.GetEntry("shop",3);if(p&&p.sell.length>0)for(var m,u=0;u<p.sell.length;++u){m=p.sell[u];var g=!1;for(var r in n)if(m===n[r].id){g=!0;break}g===!1&&c.push(m)}for(var u=0;u<c.length;u++)this.AddThePetItems(c[u],0);this.petScorllView.scrollToTop(.1)}},AddThePetItems:function(e,t){var n=e,i=window.GameData,o=i.pet.items;0!==t&&(n=o[e].id);var s,a,c=this.petScorllView.content;s=Table.GetEntry("pet",n),a=cc.instantiate(this.petItemPrefab),this.InitpetPrefab.bind(this)(a,s,e,t),c.addChild(a)},InitpetPrefab:function(e,t,n,i){var o=e.getChildByName("petHeadImag").getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(o));var s=e.getChildByName("petName").getComponent("cc.Label");s.string=t.name;var a=e.getChildByName("petState_jihuo"),c=e.getChildByName("petState_tihuan"),r=e.getChildByName("petState_weihuode"),h=e.getChildByName("petState_guoqi");a.active=!1,c.active=!1,r.active=!1,h.active=!1,0===i?r.active=!0:1===i?c.active=!0:2===i?a.active=!0:3===i&&(h.active=!0),e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowPetInfo(t,n,i)}.bind(this)),this.haveShowInit===!1&&(this.haveShowInit=!0,this.ShowPetInfo(t,n,i))},ShowPetInfo:function(e,t,n){this.showPetItemConfig=e;var i=this.petNameLab.getComponent("cc.Label");i.string=e.name;var o=this.petImag.getComponent("cc.Sprite");cc.loader.loadRes(e.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(o));var s=this.petInfo.getComponent("cc.Label");s.string=e.desc,this.xufeiBtn.node.active=!1,this.tihuanBtn.node.active=!1,this.buyBtn.node.active=!1,this.petEndTimeTitle.node.active=!1,this.petEndTimeLab.node.active=!1;var a=this.petEndTimeLab.getComponent("cc.Label"),c=window.GameData,r=c.pet.items;if(0!==n){1===n?this.tihuanBtn.node.active=!0:this.xufeiBtn.node.active=!0;var h=r[t].validTime+r[t].buyTime;a.string=this.GetLocalTimeByNs(h),this.petEndTimeTitle.node.active=!0,this.petEndTimeLab.node.active=!0}else this.buyBtn.node.active=!0},OnXuFei:function(){this.OnHide(),GameEvent().SendEvent("OpenShop")},OnTiHuan:function(){var e={type:"activePet",petId:this.showPetItemConfig.id},t=JSON.stringify(e);GameSocket().Send(t)},OnBuyPet:function(){this.OnHide(),GameEvent().SendEvent("OpenShop",{page:2,id:this.showPetItemConfig.id})},OnClose:function(){this.OnHide()},GetLocalTimeByNs:function(e){return new Date(parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," ")}}),cc._RFpop()},{}],registerHander:[function(e,t,n){"use strict";cc._RFpush(t,"0d938HjkqRBhprE7RodwBx1","registerHander");var i=e("msgHandler"),o={};o.interest="registerSuccess",o.Process=function(e){GameEvent().SendEvent("RegisterSuccess")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],register:[function(e,t,n){"use strict";cc._RFpush(t,"83632q929pAyqfS/6vYW90v","register"),cc.Class({"extends":cc.Component,properties:{registerBtn:cc.Button,cancelBtn:cc.Button,inputAccount:cc.EditBox,inputPassword:cc.EditBox},onLoad:function(){this.registerBtn.node.on("click",this.OnRegister,this),this.cancelBtn.node.on("click",this.OnCancel,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnRegister:function(e){if(0===this.inputAccount.string.length)return void GameNotify().AddText("请输入账号");if(0===this.inputPassword.string.length)return void GameNotify().AddText("请输入密码 ");var t={type:"register",account:this.GetAccount(),password:this.GetPassword()},n=JSON.stringify(t);GameSocket().Send(n)},OnCancel:function(e){GameEvent().SendEvent("CancelRegister")},GetAccount:function(){return this.inputAccount.string},GetPassword:function(){return this.inputPassword.string}}),cc._RFpop()},{}],removePlant:[function(e,t,n){"use strict";cc._RFpush(t,"fac37jQz3lLp43mZnamrGPh","removePlant");var i=e("msgHandler"),o={};o.interest="removePlantSuccess",o.Process=function(e){GameLog(e),GameNotify().AddText("铲除成功")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],sellFruitHander:[function(e,t,n){"use strict";cc._RFpush(t,"e076d1POXxMkY6zps6Ur9SM","sellFruitHander");var i=e("msgHandler"),o={};o.interest="sellFruitSuccess",o.Process=function(e){GameNotify().AddText("出售成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],sellFruit:[function(e,t,n){"use strict";cc._RFpush(t,"f9346Fbh+BE7qdeCF0ceJ55","sellFruit"),cc.Class({"extends":cc.Component,properties:{addBtn:cc.Button,subBtn:cc.Button,sellBtn:cc.Button,cancelBtn:cc.Button,sellNumber:cc.Label,fruitName:cc.Label,price:cc.Label,amount:cc.Label},onLoad:function(){this.addBtn.node.on("click",this.OnAdd,this),this.subBtn.node.on("click",this.OnSub,this),this.sellBtn.node.on("click",this.OnSell,this),this.cancelBtn.node.on("click",function(e){this.OnHide()}.bind(this))},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnAdd:function(e){this.sellCount+=1,this.sellCount<=0&&(this.sellCount=1),this.sellCount>this.hasCount?(this.sellCount=this.hasCount,this.addBtn.interactable=!1):this.addBtn.interactable=!0,this.sellNumber.string=this.sellCount,this.amount.string=this.sellCount*this.sellPrice+"金币",this.sellCount>1&&(this.subBtn.interactable=!0)},OnSub:function(e){this.sellCount-=1,this.sellCount<=0&&(this.sellCount=1,this.subBtn.interactable=!1),this.sellNumber.string=this.sellCount,this.amount.string=this.sellCount*this.sellPrice+"金币",this.sellCount<this.hasCount&&(this.addBtn.interactable=!0)},OnSell:function(e){var t=window.GameData;if(t["package"][2][this.fruitId]<this.sellCount){var n=Table.GetEntry("error",17);return void(n&&GameNotify().AddText(n.description,window.ErrorNotifyColor))}var i={type:"sellFruit",fruitId:this.fruitId,count:this.sellCount},o=JSON.stringify(i);GameSocket().Send(o),this.OnHide()},Setup:function(e){this.fruitName.string=e.fruit.name,this.price.string=e.fruit.price+"金币",this.fruitId=e.id,this.sellPrice=e.fruit.price;var t=window.GameData;this.hasCount=0,"undefined"!=typeof t["package"][2][e.id]&&t["package"][2][e.id]>0&&(this.hasCount=t["package"][2][e.id]),this.sellCount=this.hasCount,this.OnAdd()}}),cc._RFpop()},{}],sell:[function(e,t,n){"use strict";cc._RFpush(t,"bc2b7s9RRJKkoJCsF5ZJcqy","sell"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],shop:[function(e,t,n){"use strict";cc._RFpush(t,"1b823M9uh9CW7iwBEZYCSqk","shop"),cc.Class({"extends":cc.Component,properties:{shopSeedItemPrefab:cc.Prefab,shopPropItemPrefab:cc.Prefab,shopPetItemPrefab:cc.Prefab,scrollView:cc.ScrollView,scrollbg_1:cc.Sprite,scrollbg_2:cc.Sprite,scrollbg_3:cc.Sprite,radioButton:{"default":[],type:cc.Toggle},_currentToggle:cc.Toggle,closeBtn:cc.Button,itemImag:cc.Sprite,itemNameLab:cc.Label,itemInfoLab:cc.Label,itemNumLab:cc.Label,itemSubBtn:cc.Button,itemAddBtn:cc.Button,itemGoldLab:cc.Label,itemBuyBtn:cc.Button,_selectPage:cc.Integer,_selectId:cc.Integer},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this);for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e],this.ShowTheScrollBG(e+1);break}this.itemAddBtn.node.on("click",this.OnAdd,this),this.itemSubBtn.node.on("click",this.OnSub,this),this.itemBuyBtn.node.on("click",this.OnBuy,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Setup:function(e){this._selectPage=-1,this._selectId=-1,"undefined"!=typeof e&&("number"==typeof e.page&&e.page<this.radioButton.length&&(this.radioButton[e.page].check(),this._currentToggle=this.radioButton[e.page],this._selectPage=e.page),"number"==typeof e.id&&(this._selectId=e.id),this.Load())},Load:function(){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=new Array(["plant",this.shopSeedItemPrefab,this.InitSeedPrefab],["property",this.shopPropItemPrefab,this.InitPropPrefab],["pet",this.shopPetItemPrefab,this.InitPetPrefab]),n=this.scrollView.content;if(n.removeAllChildren(),t.length>e){var i=Table.GetEntry("shop",e+1);if(i&&i.sell.length>0){for(var o,s,a,c=0;c<i.sell.length;++c)o=i.sell[c],s=Table.GetEntry(t[e][0],o),a=cc.instantiate(t[e][1]),t[e][2].bind(this)(a,s),n.addChild(a);this.scrollView.scrollToTop(.1)}}}},ShowTheScrollBG:function(e){this.scrollbg_1.node.active=!1,this.scrollbg_2.node.active=!1,this.scrollbg_3.node.active=!1,1===e?this.scrollbg_1.node.active=!0:2===e?this.scrollbg_2.node.active=!0:3===e&&(this.scrollbg_3.node.active=!0)},InitSeedPrefab:function(e,t){var n=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(n));var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("level").getComponent("cc.Label");o.string=t.minLevel+"级";var s=e.getChildByName("money").getComponent("cc.Label");s.string=t.buy,e.config=t,e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowBuySeedInfo(t)}.bind(this)),this._selectId>0?t.id===this._selectId&&this.ShowBuySeedInfo(t):1===t.id&&this.ShowBuySeedInfo(t)},OnOpenBuySeed:function(e){GameEvent().SendEvent("OpenBuySeed",e)},ShowBuySeedInfo:function(e){this.itemNameLab.string=e.name;var t="成熟时间 "+e.time.amount/60+"小时",n="预计产量 "+e.output+"个",i="预计收入 "+e.output*e.fruit.price,o="收获经验 "+(e.sowExp+e.harvestExp+e.clearExp);this.itemInfoLab.string=t+"\n"+n+"\n"+i+"\n"+o;var s=this.itemImag.getComponent("cc.Sprite");cc.loader.loadRes(e.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(s)),this.buyType=1,this.buyCount=1,this.maxCount=-1,this.itemConfig=e,this.itemNumLab.string=this.buyCount,this.itemGoldLab.string=e.buy*this.buyCount},InitPropPrefab:function(e,t){var n=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(n));var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("money").getComponent("cc.Label");o.string=t.buy,e.config=t,e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowBuyPropInfo(t)},this),this._selectId>0?t.id===this._selectId&&this.ShowBuyPropInfo(t):1===t.id&&this.ShowBuyPropInfo(t)},OnOpenBuyProp:function(e){},ShowBuyPropInfo:function(e){this.itemNameLab.string=e.name,this.itemInfoLab.string=e.desc;var t=this.itemImag.getComponent("cc.Sprite");cc.loader.loadRes(e.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(t)),this.buyType=2,this.buyCount=1,this.maxCount=-1,this.itemConfig=e,this.itemNumLab.string=this.buyCount,this.itemGoldLab.string=e.buy*this.buyCount},InitPetPrefab:function(e,t){var n=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(n));var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name,e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowBuyPetInfo(t)},this),this._selectId>0?t.id===this._selectId&&this.ShowBuyPetInfo(t):1===t.id&&this.ShowBuyPetInfo(t)},ShowBuyPetInfo:function(e){this.itemNameLab.string=e.name,this.itemInfoLab.string=e.desc;var t=this.itemImag.getComponent("cc.Sprite");cc.loader.loadRes(e.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(t)),this.buyType=3,this.buyCount=1,this.maxCount=3,this.itemConfig=e,this.itemNumLab.string=e.time.day[this.buyCount-1]+"天",this.itemGoldLab.string=e.time.money[this.buyCount-1]},radioButtonClicked:function(e){if(this._currentToggle!==e){this._currentToggle=e;var t=this.radioButton.indexOf(this._currentToggle);this.ShowTheScrollBG(t+1),this.Load()}},OnAdd:function(){this.buyCount=this.buyCount+1,this.maxCount>0&&this.buyCount>this.maxCount&&(this.buyCount=this.maxCount),3===this.buyType?(this.itemNumLab.string=this.itemConfig.time.day[this.buyCount-1]+"天",this.itemGoldLab.string=this.itemConfig.time.money[this.buyCount-1]):(this.itemNumLab.string=this.buyCount,this.itemGoldLab.string=this.itemConfig.buy*this.buyCount)},OnSub:function(){this.buyCount=this.buyCount-1,3===this.buyType?(this.buyCount<1&&(this.buyCount=1),this.itemNumLab.string=this.itemConfig.time.day[this.buyCount-1]+"天",this.itemGoldLab.string=this.itemConfig.time.money[this.buyCount-1]):(this.buyCount<1&&(this.buyCount=1),this.itemNumLab.string=this.buyCount,this.itemGoldLab.string=this.itemConfig.buy*this.buyCount)},OnBuy:function(){var e=window.GameData,t=0,n=0;if(1===this.buyType?(t=0,n=this.itemConfig.buy*this.buyCount):2===this.buyType?(t=1,n=this.itemConfig.buy*this.buyCount):3===this.buyType&&(t=2,n=this.itemConfig.time.money[this.buyCount-1]),e.GetMoney()<n){var i=Table.GetEntry("error",6);return void(i?GameNotify().AddText(i.description,window.ErrorNotifyColor):GameNotify().AddText("金币不足!",window.ErrorNotifyColor))}if(3===this.buyType){var o={type:"buyItems",kinds:t,buyId:this.itemConfig.id,buyCount:this.itemConfig.time.day[this.buyCount-1]},s=JSON.stringify(o);GameSocket().Send(s)}else{var o={type:"buyItems",kinds:t,buyId:this.itemConfig.id,buyCount:this.buyCount},s=JSON.stringify(o);GameSocket().Send(s)}this.OnHide()},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}],social:[function(e,t,n){"use strict";cc._RFpush(t,"cba04NXrWNLzoiXEbjNHFfP","social"),cc.Class({"extends":cc.Component,properties:{radioButton:{"default":[],type:cc.Toggle},flodButton:cc.Button,scrollView:cc.ScrollView,itemPrefab:cc.Prefab,_currentToggle:cc.Toggle,_flodState:cc.Integer},onLoad:function(){this._flodState=1,this.flodButton.node.on("click",this.OnFold,this),this.OnFold();for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e];break}GameEvent().OnEvent("UpdateNeighbourList",this.Reload,this),GameEvent().OnEvent("UpdateFriendsList",this.Reload,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},radioButtonClicked:function(e){this._currentToggle!==e&&(this._currentToggle=e,this.Reload())},OnFold:function(){0===this._flodState?(this.node.x=326,this._flodState=1,this.scrollView.scrollToTop(.1)):(this.node.x=630,this._flodState=0,this.scrollView.scrollToTop(.1))},Reload:function(){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=this.scrollView.content;t.removeAllChildren();var n,i,o,s=window.GameData;if(0===e){var a=s.neighbourList;for(o=0;o<a.length;++o)n=cc.instantiate(this.itemPrefab),i=a[o],this.InitItemPrefab(n,i),t.addChild(n)}else if(1===e){var c=s.friendsList;for(o=0;o<c.length;++o)n=cc.instantiate(this.itemPrefab),i=c[o],this.InitItemPrefab(n,i),t.addChild(n)}}},InitItemPrefab:function(e,t){var n=e.getChildByName("name").getComponent("cc.Label");n.string=t.username;var i=e.getChildByName("level").getComponent("cc.Label");i.string="Lv."+GameData.GetLevelByExp(t.experience);var o=e.getChildByName("visit");o.userId=t.id,o.on("click",this.OnVisit,this)},OnVisit:function(e){var t=e.target.userId,n={type:"visitHome",userId:t},i=JSON.stringify(n);GameSocket().Send(i)}}),cc._RFpop()},{}],socket:[function(e,t,n){"use strict";cc._RFpush(t,"a6873XdOGBBNaNL7VhdxpQ+","socket");var i=cc.Class({"extends":cc.Component,statics:{inst:null},onLoad:function(){i.inst=this,this.connected=!1,this.webSocket=null},Connect:function(e,t,n){var i=this;if(!i.webSocket)try{var o=new WebSocket("ws://"+e+":"+t+"/"+("undefined"!=typeof n?n:""));o.onopen=function(e){i.connected=!0,i.webSocket=o,GameEvent().SendEvent("connectedServer")},o.onmessage=function(e){i.OnReceiveMessage(e)},o.onerror=function(e){GameLog("GameSocket error!!!!")},o.onclose=function(e){GameLog("GameSocket closed."),i.connected=!1,alert("连接服务器失败,请重新登录!"),location.reload()}}catch(s){GameLog(s)}},IsConnected:function(){return this.connected},OnReceiveMessage:function(e){var t=e.data;console.log("Receive data:"+t);try{var n=JSON.parse(t);MessageHandler.Process(n)}catch(e){GameLog(e)}},Send:function(e){this.connected&&this.webSocket.send(e)}});cc._RFpop()},{}],sowSeeds:[function(e,t,n){"use strict";cc._RFpush(t,"8436dsX3GdA27FeT0WUC4mm","sowSeeds");var i=e("msgHandler"),o={};o.interest="sowSeedsSuccess",o.Process=function(e){GameLog(e),GameNotify().AddText("播种成功")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],toolbar:[function(e,t,n){"use strict";cc._RFpush(t,"0a2c4MVMjNCg4dSQx6HQWwO","toolbar"),cc.Class({"extends":cc.Component,properties:{shopBtn:cc.Button,packageBtn:cc.Button,petBtn:cc.Button},onLoad:function(){this.shopBtn.node.on("click",function(){GameEvent().SendEvent("OpenShop")}),this.packageBtn.node.on("click",function(){GameEvent().SendEvent("OpenPackage")}),this.petBtn.node.on("click",function(){GameEvent().SendEvent("OpenPet")})},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1}}),cc._RFpop()},{}],tudiLevelUp:[function(e,t,n){"use strict";cc._RFpush(t,"0da8fsSRsBI9LmkYxLX0rF+","tudiLevelUp"),cc.Class({"extends":cc.Component,properties:{levelUpNode:cc.Node,nowLandImag:cc.Sprite,nextLandImag:cc.Sprite,nowLevelLab:cc.Label,nextLeveLab:cc.Label,nowInfoLab:cc.Label,nextInfoLab:cc.Label,conditionLevelLab:cc.Label,conditionMoneyLab:cc.Label,conditionPropLab:cc.Label,conditionKaiKenTuDi:cc.Label,levelUpBtn:cc.Button,cannotLevelUpImag:cc.Sprite,colse:cc.Button,maxLevelNode:cc.Node,confirm:cc.Button},onLoad:function(){this.colse.node.on("click",this.OnClose,this),this.levelUpBtn.node.on("click",this.OnLevelUp,this),this.confirm.node.on("click",this.OnConfirm,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Setup:function(e){this.landIndex=e;var t=window.GameData,n=t.lands,i=n[e];this.nowLevel=i.level;var o=Table.GetEntry("landMaxLevel",1),s=o.maxLandLevel;this.nowLevel>=s?this.showType=2:this.showType=1},Load:function(){if(1===this.showType){this.levelUpNode.active=!0,this.maxLevelNode.active=!1;var e=window.GameData,t=e.lands,n=Table.GetEntry("landsLevel",this.nowLevel),i=Table.GetEntry("landsLevel",this.nowLevel+1),o=this.nowLandImag.getComponent("cc.Sprite");cc.loader.loadRes(n.imagPaht,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(o));var s=this.nextLandImag.getComponent("cc.Sprite");cc.loader.loadRes(i.imagPaht,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(s));var a=this.nowLevelLab.getComponent("cc.Label");a.string=this.nowLevel;var c=this.nextLeveLab.getComponent("cc.Label");c.string=this.nowLevel+1;for(var r=this.nowInfoLab.getComponent("cc.Label"),h=this.nextInfoLab.getComponent("cc.Label"),d="",l="",u=0;u<n.effect.length;u++)n.effect[u]>0&&(d=d+this.GetStartEffectStr(u)+n.effect[u]+this.GetEndEffectStr(u));for(var u=0;u<i.effect.length;u++)i.effect[u]>0&&(l=l+this.GetStartEffectStr(u)+i.effect[u]+this.GetEndEffectStr(u));r.string=d,h.string=l;var p=this.conditionLevelLab.getComponent("cc.Label");p.string="玩家等级："+i.minLevel;var m=!1;e.GetLevel()<i.minLevel?this.conditionLevelLab.node.color=cc.Color.RED:(m=!0,this.conditionLevelLab.node.color=cc.Color.BLACK);var g=this.conditionMoneyLab.getComponent("cc.Label");g.string="消耗金币："+i.needMoney;var f=!1;e.GetMoney()<i.needMoney?this.conditionMoneyLab.node.color=cc.Color.RED:(f=!0,this.conditionMoneyLab.node.color=cc.Color.BLACK);var v=this.conditionPropLab.getComponent("cc.Label"),b=i.propertyId,C=Table.GetEntry("property",b),y=(e["package"],0);"undefined"!=typeof e["package"][1][b]&&(y=e["package"][1][b]);var S=C.name,L=i.propertyNumber;v.string=S+"：( "+y+"/"+L+" )";var O=!1;y<L?this.conditionPropLab.node.color=cc.Color.RED:(O=!0,this.conditionPropLab.node.color=cc.Color.BLACK);var B=this.conditionKaiKenTuDi.getComponent("cc.Label");B.string="开垦土地"+i.landsNumber;var w=!1;t.length<i.landsNumber?this.conditionKaiKenTuDi.node.color=cc.Color.RED:(w=!0,this.conditionKaiKenTuDi.node.color=cc.Color.BLACK),m===!0&&f===!0&&O===!0&&w?(this.levelUpBtn.node.active=!0,this.cannotLevelUpImag.node.active=!1):(this.levelUpBtn.node.active=!1,this.cannotLevelUpImag.node.active=!0)}else 2===this.showType&&(this.levelUpNode.active=!1,this.maxLevelNode.active=!0)},GetStartEffectStr:function(e){var t="";return 0===e?t="收获果实数量 + ":1===e?t="收获果实经验 + ":2===e?t="植物成熟时间 - ":3===e?t="收获时有":4===e&&(t="使收获数量增长"),t},GetEndEffectStr:function(e){var t="";return 0===e?t="%\n":1===e?t="%\n":2===e?t="%\n":3===e?t="%的几率":4===e&&(t="%\n"),t},OnClose:function(){this.OnHide()},OnLevelUp:function(){var e={type:"upgradeLands",landIndex:this.landIndex},t=JSON.stringify(e);GameSocket().Send(t),this.OnHide()},OnConfirm:function(){this.OnHide()}}),cc._RFpop()},{}],tudikuojian:[function(e,t,n){"use strict";cc._RFpush(t,"25a90FXphZHKokylbsrjFH/","tudikuojian"),cc.Class({"extends":cc.Component,properties:{info1:cc.Label,info2:cc.Label,tip:cc.Label,cancel:cc.Button,confirm:cc.Button},onLoad:function(){this.cancel.node.on("click",this.OnCancel,this),this.confirm.node.on("click",this.OnConfirm,this),this.canKj=this.IsCanKJ()},Setup:function(e){this.landTag=e},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},IsCanKJ:function(){var e=!1,t=Table.GetEntry("unlockLands",1);this.needMoney=t.needMoney[this.landTag-1],this.minLevel=t.minLevel[this.landTag-1],this.info1.string="扩建这块土地需要"+this.minLevel+"级",this.info2.string="和金币"+this.needMoney;var n=window.GameData;return n.GetLevel()<this.minLevel?(this.tip.node.active=!0,this.tip.string="对不起，您的等级不足"):(this.tip.node.active=!0,n.GetMoney()<this.needMoney?this.tip.string="对不起，您的金币不足":(this.tip.node.active=!1,e=!0)),e},OnCancel:function(){this.OnHide()},OnConfirm:function(){if(this.canKj===!0){var e={type:"unlockLands",landIndex:this.landTag},t=JSON.stringify(e);GameSocket().Send(t)}this.OnHide()}}),cc._RFpop()},{}],unlockLands:[function(e,t,n){"use strict";cc._RFpush(t,"acc5fKIFnlG1a8JmLDtwrEO","unlockLands");var i=e("msgHandler"),o={};o.interest="unlockLandsSuccess",o.Process=function(e){GameLog(e),GameNotify().AddText("扩建土地成功")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],upgradeLands:[function(e,t,n){"use strict";cc._RFpush(t,"2983awHQPpL1a9J7rfXByIH","upgradeLands");var i=e("msgHandler"),o={};o.interest="upgradeLandsSuccess",o.Process=function(e){GameNotify().AddText("土地升级成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],userBaseData:[function(e,t,n){"use strict";cc._RFpush(t,"aac4bOG2OBAEZ78IJJ4C9ry","userBaseData");var i=e("msgHandler"),o={};o.interest="userBaseData",o.Process=function(e){var t=window.GameData;t.userId=e.id,t.userName=e.username,t.money=e.money,t.experience=e.experience,t.vip=e.vip,t.lands=JSON.parse(e.lands),t["package"]=JSON.parse(e["package"]),t.pet=JSON.parse(e.pets),GameEvent().SendEvent("UpdateBaseData"),ChatSocket().Send("reg",{userId:GameData.GetUserId(),name:GameData.GetUserName(),level:GameData.GetLevel()}),ChatSocket().Send("enterRoom",{roomId:GameData.GetUserId()})},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],userDataSync:[function(e,t,n){"use strict";cc._RFpush(t,"37dc3E2WXtHFbxFN5E1HTL1","userDataSync");var i=e("msgHandler"),o={};o.interest="userDataSync",o.Process=function(e){var t=window.GameData,n=!1;"undefined"!=typeof e.money&&(t.money=e.money,n=!0),"undefined"!=typeof e.experience&&(t.experience=e.experience,n=!0),"undefined"!=typeof e.vip&&(t.vip=e.vip,n=!0),"undefined"!=typeof e.lands&&(t.lands=JSON.parse(e.lands),GameEvent().SendEvent("UpdateLands")),"undefined"!=typeof e["package"]&&(t["package"]=JSON.parse(e["package"]),GameEvent().SendEvent("UpdatePackage")),n&&GameEvent().SendEvent("UpdateUserInfo"),"undefined"!=typeof e.pets&&(t.pet=JSON.parse(e.pets),GameEvent().SendEvent("UpdatePet"))},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],visitClearDisaster:[function(e,t,n){"use strict";cc._RFpush(t,"3a92bxVC2BOf6CA9lMNUD+N","visitClearDisaster");var i=e("msgHandler"),o={};o.interest="visitClearDisasterSuccess",o.Process=function(e){var t=window.GameData,n=e.visitUserId,i=e.lands;1===e.disasterType?GameNotify().AddText("除虫成功!"):2===e.disasterType?GameNotify().AddText("浇水成功!"):3===e.disasterType&&GameNotify().AddText("营养添加成功!"),t.visitUser.userid===n&&(t.visitUser.lands=i.slice(),GameEvent().SendEvent("VisitUserLands"))},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],visitHome:[function(e,t,n){"use strict";cc._RFpush(t,"0772d7783hDhruxwTPM37Iz","visitHome");var i=e("msgHandler"),o={};o.interest="visitHomeSuccess",o.Process=function(e){var t=window.GameData,n=e;t.visitUser={userid:n.userid,username:n.username,money:n.money,experience:n.experience,vip:n.vip,lands:JSON.parse(n.lands)},GameEvent().SendEvent("VisitHome"),GameEvent().SendEvent("UpdateVisitInfo",t.visitUser),GameEvent().SendEvent("VisitUserLands")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],visitSteal:[function(e,t,n){"use strict";cc._RFpush(t,"26b2f7dzYxAQZVXcUAMgKN9","visitSteal");var i=e("msgHandler"),o={};o.interest="visitStealSuccess",o.Process=function(e){var t=window.GameData,n=e.visitUserId,i=e.lands;"undefined"==typeof e.petKick||e.petKick===!1?GameNotify().AddText("偷取成功!"):GameNotify().AddText("被宠物发现, 偷取失败!",cc.Color.YELLOW),t.visitUser.userid===n&&(t.visitUser.lands=i.slice(),GameEvent().SendEvent("VisitUserLands"))},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],visit:[function(e,t,n){"use strict";cc._RFpush(t,"30115E4E6RNaIQ31YoiZqUh","visit"),cc.Class({"extends":cc.Component,properties:{friendBtn:cc.Button,messageBtn:cc.Button,friendLabel:cc.Label},onLoad:function(){this.friendBtn.node.on("click",this.OnFriendClick,this),this.messageBtn.node.on("click",this.OnMessageClick,this),GameEvent().OnEvent("UpdateFriendsList",this.UpdateFriendLabel,this)},OnShow:function(){this.node.active=!0,this.UpdateFriendLabel()},OnHide:function(){this.node.active=!1},OnFriendClick:function(){var e,t,n=window.GameData,i=n.visitUser.userid;t=this.IsFriendOfVisit(),e=t===!1?{type:"addFriend",addUserId:i}:{type:"removeFriend",removeUserId:i};var o=JSON.stringify(e);GameSocket().Send(o)},OnMessageClick:function(){var e=window.GameData;GameEvent().SendEvent("OpenMessageBox",e.visitUser.userid)},IsFriendOfVisit:function(){for(var e=!1,t=window.GameData,n=t.visitUser.userid,i=t.friendsList,o=0;o<i.length;++o)if(i[o].id===n){e=!0;break}return e},UpdateFriendLabel:function(){var e=this.IsFriendOfVisit();e?this.friendLabel.string="解除\n好友":this.friendLabel.string="添加\n好友"}}),cc._RFpop()},{}],warehouse:[function(e,t,n){"use strict";cc._RFpush(t,"5f12bh6LmFEorn6viVVDOUf","warehouse");cc.Class({"extends":cc.Component,properties:{fruitPrefab:cc.Prefab,seedPrefab:cc.Prefab,scrollView:cc.ScrollView,scrollbg_1:cc.Sprite,scrollbg_2:cc.Sprite,radioButton:{"default":[],type:cc.Toggle},_currentToggle:cc.Toggle,itemNode:cc.Node,itemImag:cc.Sprite,itemName:cc.Label,itemInfo:cc.Label,itemNumLab:cc.Label,itemSubBtn:cc.Button,itemAddBtn:cc.Button,itemSellBtn:cc.Button,sellAllBtn:cc.Button,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),this.itemSubBtn.node.on("click",this.OnItemSub,this),this.itemAddBtn.node.on("click",this.OnItemAdd,this),this.itemSellBtn.node.on("click",this.OnItemSell,this),this.sellAllBtn.node.on("click",this.OnSellAll,this);for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e],this.ShowTheScrollBG(e+1);break}GameEvent().OnEvent("UpdatePackage",this.Load,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=new Array(["plant",this.fruitPrefab,this.InitFruitPrefab],["plant",this.seedPrefab,this.InitSeedPrefab]),n=this.scrollView.content;if(n.removeAllChildren(),t.length>e){var i=window.GameData,o=i["package"],s=-1,a=0,c=e;if(0===e?c=2:1===e&&(c=0),"undefined"!=typeof o[c]){var r,h,d,l=!1;for(var u in o[c])o[c][u]>0&&(r=parseInt(u),h=Table.GetEntry(t[e][0],r),l===!1&&(l=!0,s=r,a=o[c][u]),d=cc.instantiate(t[e][1]),t[e][2].bind(this)(d,h,o[c][u]),n.addChild(d))}this.scrollView.scrollToTop(.1),s===-1?this.itemNode.active=!1:0===e?this.ShowFruitItemInfo(s,a):1===e?this.ShowSeedItemInfo(s,a):this.itemNode.active=!1}}}},ShowTheScrollBG:function(e){this.scrollbg_1.node.active=!1,this.scrollbg_2.node.active=!1,1===e?this.scrollbg_1.node.active=!0:2===e&&(this.scrollbg_2.node.active=!0)},InitFruitPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.fruit.name;var o=e.getChildByName("level").getComponent("cc.Label");o.string=t.minLevel+"级";var s=e.getChildByName("count").getComponent("cc.Label");s.string=n,e.config=t;var a=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(a)),e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowFruitItemInfo(t.id,n)}.bind(this))},ShowFruitItemInfo:function(e,t){var n=Table.GetEntry("plant",e),i=this.itemImag.getComponent("cc.Sprite");cc.loader.loadRes(n.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(i));var o=this.itemName.getComponent("cc.Label");o.string=n.name,this.ShowItemInfo(n.fruit.price,t),this.showItemPrice=n.fruit.price,this.showItemNum=t,this.showItemMaxNum=t,this.showItemId=e,this.showItemType=1},ShowItemInfo:function(e,t){var n="单价："+e+"金币",i="数量："+t+"个",o="获得："+t*e+"金币",s=this.itemInfo.getComponent("cc.Label");s.string=n+"\n"+i+"\n"+o;var a=this.itemNumLab.getComponent("cc.Label");a.string=t},InitSeedPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.fruit.name;var o=e.getChildByName("level").getComponent("cc.Label");o.string=t.minLevel+"级";var s=e.getChildByName("count").getComponent("cc.Label");s.string=n,e.config=t;var a=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(a)),e.on(cc.Node.EventType.TOUCH_END,function(e){this.ShowSeedItemInfo(t.id,n)}.bind(this))},ShowSeedItemInfo:function(e,t){var n=Table.GetEntry("plant",e),i=this.itemImag.getComponent("cc.Sprite");cc.loader.loadRes(n.headImagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(i));var o=this.itemName.getComponent("cc.Label");o.string=n.name,this.ShowItemInfo(n.sellPrice,t),this.showItemPrice=n.sellPrice,this.showItemNum=t,this.showItemMaxNum=t,this.showItemId=e,this.showItemType=2},radioButtonClicked:function(e){if(this._currentToggle!==e){this._currentToggle=e;var t=this.radioButton.indexOf(this._currentToggle);this.ShowTheScrollBG(t+1),this.Load()}},OnItemSub:function(){this.showItemNum--,this.showItemNum<1&&(this.showItemNum=1),this.ShowItemInfo(this.showItemPrice,this.showItemNum)},OnItemAdd:function(){this.showItemNum++,this.showItemNum>this.showItemMaxNum&&(this.showItemNum=this.showItemMaxNum),this.ShowItemInfo(this.showItemPrice,this.showItemNum);
},OnItemSell:function(){if(this.showItemNum<this.showItemMaxNum){var e=Table.GetEntry("error",17);return void(e&&GameNotify().AddText(e.description,window.ErrorNotifyColor))}if(1===this.showItemType){var t={type:"sellFruit",fruitId:this.showItemId,count:this.showItemNum},n=JSON.stringify(t);GameSocket().Send(n)}else if(2===this.showItemType){var t={type:"sellSeed",fruitId:this.showItemNum,count:this.showItemNum},n=JSON.stringify(t);GameSocket().Send(n)}},OnSellAll:function(){if(1===this.showItemType){var e={type:"sellAllFruit"},t=JSON.stringify(e);GameSocket().Send(t)}else if(2===this.showItemType){var e={type:"sellAllSeed"},t=JSON.stringify(e);GameSocket().Send(t)}},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}],xiadanchenggong:[function(e,t,n){"use strict";cc._RFpush(t,"9c441rTP3pAAp8M/Qzz7hI7","xiadanchenggong"),cc.Class({"extends":cc.Component,properties:{shangpinImg:cc.Sprite,shangpinNameLab:cc.Label,shangpinInfoLab:cc.Label,shangpinNumLab:cc.Label,shoujianrenBox:cc.EditBox,youbianBox:cc.EditBox,dizhiBox:cc.EditBox,dianhuaBox:cc.EditBox,cancelBtn:cc.Button,confirmBtn:cc.Button,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),this.cancelBtn.node.on("click",this.OnCancel,this),this.confirmBtn.node.on("click",this.OnConfirm,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){this.shangpinId=window.duihuanshangpinid,this.shangpinNum=window.duihuanshangpinNum;var e=Table.GetEntry("duihuanshangpin",this.shangpinId),t=this.shangpinImg.getComponent("cc.Sprite");cc.loader.loadRes(e.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(t));var n=this.shangpinNameLab.getComponent("cc.Label");n.string=e.name;var i=this.shangpinInfoLab.getComponent("cc.Label");i.string=e.desc;var o=this.shangpinNumLab.getComponent("cc.Label");o.string=this.shangpinNum}},OnCancel:function(){this.OnHide()},OnConfirm:function(){if(0===this.shoujianrenBox.string.length)return void GameNotify().AddText("请输入收件人");if(0===this.youbianBox.string.length)return void GameNotify().AddText("请输入邮编");if(0===this.dizhiBox.string.length)return void GameNotify().AddText("请输入详细地址");if(0===this.dianhuaBox.string.length)return void GameNotify().AddText("请输入联系电话");var e={type:"duihuanyouji",shangpinId:this.shangpinId,shangpinNum:this.shangpinNum,shoujianren:this.GetShouJianRen(),youbian:this.GetYouBian(),dizhi:this.GetDiZhi(),dianhua:this.GetDianHua()},t=JSON.stringify(e);GameSocket().Send(t)},GetShouJianRen:function(){return this.shoujianrenBox.string},GetYouBian:function(){return this.youbianBox.string},GetDiZhi:function(){return this.dizhiBox.string},GetDianHua:function(){return this.dianhuaBox.string},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}]},{},["AudioMng","ButtonScaler","canvas","chatSocket","gameData","gameEvent","gameLayer","buyItemsHandler","clearDisaster","error","friendHandler","friendsList","getLogs","getMsgs","harvestLands","hechengHandler","loginHandler","manureLands","neighbourList","registerHander","removePlant","sellFruitHander","sowSeeds","unlockLands","upgradeLands","userBaseData","userDataSync","visitClearDisaster","visitHome","visitSteal","msgHandler","notifyText","socket","buyProperty","buySeed","chat","detail","duihuan","duihuanyouji","goBack","hecheng","info","login","main","maskLayer","message","package","petLayer","register","sell","sellFruit","shop","social","toolbar","tudiLevelUp","tudikuojian","visit","warehouse","xiadanchenggong"]);