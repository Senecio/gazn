require=function e(t,n,i){function o(c,a){if(!n[c]){if(!t[c]){var r="function"==typeof require&&require;if(!a&&r)return r(c,!0);if(s)return s(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){var n=t[c][1][e];return o(n?n:e)},l,l.exports,e,t,n,i)}return n[c].exports}for(var s="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({AudioMng:[function(e,t,n){"use strict";cc._RFpush(t,"46bf8MJ+ylG6L5OVxzUo6vg","AudioMng"),cc.Class({"extends":cc.Component,properties:{winAudio:{"default":null,url:cc.AudioClip},loseAudio:{"default":null,url:cc.AudioClip},cardAudio:{"default":null,url:cc.AudioClip},buttonAudio:{"default":null,url:cc.AudioClip},chipsAudio:{"default":null,url:cc.AudioClip},bgm:{"default":null,url:cc.AudioClip}},playMusic:function(){cc.audioEngine.playMusic(this.bgm,!0)},pauseMusic:function(){cc.audioEngine.pauseMusic()},resumeMusic:function(){cc.audioEngine.resumeMusic()},_playSFX:function(e){cc.audioEngine.playEffect(e,!1)},playButton:function(){this._playSFX(this.buttonAudio)}}),cc._RFpop()},{}],ButtonScaler:[function(e,t,n){"use strict";cc._RFpush(t,"5c156RZ5+lJ4It6heya76Cw","ButtonScaler"),cc.Class({"extends":cc.Component,properties:{pressedScale:1,transDuration:0},onLoad:function(){function e(e){this.stopAllActions(),i&&i.playButton(),this.runAction(n.scaleDownAction)}function t(e){this.stopAllActions(),this.runAction(n.scaleUpAction)}var n=this,i=AudioMng();n.initScale=this.node.scale,n.button=n.getComponent(cc.Button),n.scaleDownAction=cc.scaleTo(n.transDuration,n.pressedScale),n.scaleUpAction=cc.scaleTo(n.transDuration,n.initScale),this.node.on("touchstart",e,this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RFpop()},{}],buyItemsHandler:[function(e,t,n){"use strict";cc._RFpush(t,"c49f0AZwPBMHpfqVQ9qFWIM","buyItemsHandler");var i=e("msgHandler"),o={};o.interest="buyItemsSuccess",o.Process=function(e){GameEvent().SendEvent("BuyItemsSuccess"),GameNotify().AddText("购买成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],buyProperty:[function(e,t,n){"use strict";cc._RFpush(t,"77e9324BmFCb5KLA71q3gE2","buyProperty"),cc.Class({"extends":cc.Component,properties:{addBtn:cc.Button,subBtn:cc.Button,buyBtn:cc.Button,cancelBtn:cc.Button,propName:cc.Label,propType:cc.Label,describe:cc.Label,buyNumber:cc.Label,amountPrice:cc.Label,limitLevel:cc.Label},onLoad:function(){this.addBtn.node.on("click",this.OnAdd,this),this.subBtn.node.on("click",this.OnSub,this),this.buyBtn.node.on("click",this.OnBuy,this),this.cancelBtn.node.on("click",function(e){this.OnHide()}.bind(this))},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnAdd:function(e){this.buyCount+=1,this.buyCount<=0&&(this.buyCount=1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币",this.buyCount>1&&(this.subBtn.interactable=!0)},OnSub:function(e){this.buyCount-=1,this.buyCount<=0&&(this.buyCount=1,this.subBtn.interactable=!1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币"},OnBuy:function(e){var t=window.GameData;if(t.GetMoney()<this.buyCount*this.buyPrice){var n=Table.GetEntry("error",6);return void(n?GameNotify().AddText(n.description,window.ErrorNotifyColor):GameNotify().AddText("金币不足!",window.ErrorNotifyColor))}var i={type:"buyItems",kinds:1,buyId:this.buyId,buyCount:this.buyCount},o=JSON.stringify(i);GameSocket().Send(o),this.OnHide()},Setup:function(e){this.propName.string=e.name,this.describe.string=e.desc,this.buyId=e.id,this.buyPrice=e.buy,this.buyCount=0,this.limitLevel.node.active=!1,this.OnAdd(null)}}),cc._RFpop()},{}],buySeed:[function(e,t,n){"use strict";cc._RFpush(t,"ad48686xkROraOi6t5jt9WJ","buySeed"),cc.Class({"extends":cc.Component,properties:{addBtn:cc.Button,subBtn:cc.Button,buyBtn:cc.Button,cancelBtn:cc.Button,buyNumber:cc.Label,seedName:cc.Label,time:cc.Label,output:cc.Label,price:cc.Label,gains:cc.Label,getExp:cc.Label,amountPrice:cc.Label,limitLevel:cc.Label},onLoad:function(){this.addBtn.node.on("click",this.OnAdd,this),this.subBtn.node.on("click",this.OnSub,this),this.buyBtn.node.on("click",this.OnBuy,this),this.cancelBtn.node.on("click",function(e){this.OnHide()}.bind(this))},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnAdd:function(e){this.buyCount+=1,this.buyCount<=0&&(this.buyCount=1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币",this.buyCount>1&&(this.subBtn.interactable=!0)},OnSub:function(e){this.buyCount-=1,this.buyCount<=0&&(this.buyCount=1,this.subBtn.interactable=!1),this.buyNumber.string=this.buyCount,this.amountPrice.string=this.buyCount*this.buyPrice+"金币"},OnBuy:function(e){var t=window.GameData;if(t.GetMoney()<this.buyCount*this.buyPrice){var n=Table.GetEntry("error",6);return void(n?GameNotify().AddText(n.description,window.ErrorNotifyColor):GameNotify().AddText("金币不足!",window.ErrorNotifyColor))}var i={type:"buyItems",kinds:0,buyId:this.buyId,buyCount:this.buyCount},o=JSON.stringify(i);GameSocket().Send(o),this.OnHide()},Setup:function(e){this.seedName.string=e.name,this.time.string=e.time.amount/60+"小时",this.output.string=e.output+"个",this.price.string=e.fruit.price+"金币",this.gains.string=e.output*e.fruit.price,this.getExp.string=e.sowExp+e.harvestExp+e.clearExp,this.buyId=e.id,this.buyPrice=e.buy,this.buyCount=0;var t=window.GameData;t.GetLevel()<e.minLevel?(this.buyBtn.interactable=!1,this.limitLevel.node.active=!0,this.limitLevel.string="需求Lv."+e.minLevel+"(等级不足)"):(this.limitLevel.node.active=!1,this.buyBtn.interactable=!0),this.OnAdd(null)}}),cc._RFpop()},{}],canvas:[function(e,t,n){"use strict";cc._RFpush(t,"e8895VhD7hAh6SOISVoNqK9","canvas"),cc.Class({"extends":cc.Component,properties:{gameNotify:cc.Prefab},onLoad:function(){}}),cc._RFpop()},{}],clearDisaster:[function(e,t,n){"use strict";cc._RFpush(t,"a7ba5iZgTVCs65ppDPuBXvh","clearDisaster");var i=e("msgHandler"),o={};o.interest="clearDisasterSuccess",o.Process=function(e){GameEvent().SendEvent("ClearDisasterSuccess"),1===e.disasterType?GameNotify().AddText("除虫成功!"):2===e.disasterType?GameNotify().AddText("浇水成功!"):3===e.disasterType&&GameNotify().AddText("营养添加成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],error:[function(e,t,n){"use strict";cc._RFpush(t,"e3e63hfLZdPjZl6YD4R3NNl","error");var i=e("msgHandler"),o={};o.interest="error",o.Process=function(e){GameLog(e);var t=Table.GetEntry("error",e.id);t&&(GameLog(t.description),GameNotify().AddText(t.description,ErrorNotifyColor))},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],gameData:[function(e,t,n){"use strict";cc._RFpush(t,"b1eb7lYRI5DV5yopcwfGiwY","gameData"),function(){var e={userId:-1,userName:"",money:0,experience:0,vip:0,lands:[],"package":[],neighbourList:[]};e.GetUserId=function(){return this.userId},e.GetUserName=function(){return this.userName},e.GetMoney=function(){return this.money},e.GetLevel=function(){var e=1;return this.experience>0&&(e+=Math.floor(this.experience/200)),e},e.GetLevelByExp=function(e){var t=1;return e>0&&(t+=Math.floor(e/200)),t},e.GetLevelExp=function(){return this.experience%200},e.GetLevelExpByExp=function(e){return e%200},e.GetLevelExpMax=function(){return 200},"undefined"!=typeof t&&(t.exports=e),"undefined"!=typeof window&&(window.GameData=e)}(),cc._RFpop()},{}],gameEvent:[function(e,t,n){"use strict";cc._RFpush(t,"863b78ivfJOp5nxyBAag2+G","gameEvent");var i=cc.Class({"extends":cc.Component,statics:{inst:null},onLoad:function(){i.inst=this},OnEvent:function(e,t,n){this.node.on(e,t,n)},OffEvent:function(e,t,n){this.node.off(e,t,n)},SendEvent:function(e,t){this.node.emit(e,t)}});cc._RFpop()},{}],gameLayer:[function(e,t,n){"use strict";function i(e,t,n,i,o){var s=0,c=[0,0,0];if(t<e)return c;for(var a=Math.floor((t-e)/m),r=0;r<3;++r)if(s+=n[r],s>a){if("undefined"!=typeof o&&o){var d=Math.floor((o-t)/m);if(s-a>d)c[r]=Math.floor(d/v*i);else for(c[r]=Math.floor((s-a)/v*i),d-=s-a;++r<3;){if(!(d>n[r])){c[r]=Math.floor(d/v*i);break}c[r]=Math.floor(n[r]/v*i),d-=n[r]}break}c[r]=Math.floor((s-a)/v*i),s=0,a=0}return c}function o(e,t,n,o,s,c,a){var r=Math.floor((t-n)/m),d=r,l=[0,0,0];"undefined"!=typeof o&&o&&(l=i(n,o,s,c,a));for(var u=0;u<3;++u){if(s[u]+l[u]>e[u]+d)return[!1,u,s[u]+l[u]-e[u]-d];d=e[u]+d-(s[u]+l[u])}return[!0]}cc._RFpush(t,"0c2e7ISWOdImp7YKyyaFh8m","gameLayer");var s=1,c=2,a=3,r=4,d=5,l=6,u=7,h=8,p=0,f=1,g=2,m=6e4,v=60;cc.Class({"extends":cc.Component,properties:{landsPrefab:cc.Prefab,opertorBtnPrefab:cc.Prefab,cangKuSpr:cc.Sprite,refreshSecond:{"default":30,type:cc.Float}},onLoad:function(){this.scrollView=this.node.getComponent("cc.ScrollView"),this.content=this.scrollView.content,this.lands=this.content.getChildByName("lands"),this.touchNode=this.content.getChildByName("touchNode"),this.scrollView.horizontal=!1,this.scrollView.vertical=!1,GameEvent().OnEvent("LoginSuccess",this.OnLoginSuccess,this),GameEvent().OnEvent("UpdateBaseData",this.ReLoadData,this),GameEvent().OnEvent("UpdateLands",this.ReLoadData,this),GameEvent().OnEvent("UserSowSeeds",this.OnUserSowSeed,this),GameEvent().OnEvent("UserManure",this.OnUserManure,this),GameEvent().OnEvent("NeedCancelSelectLand",this.OnCancelSelectLand,this)},start:function(){for(var e,t=0;t<4;++t)for(var n=0;n<3;++n){var i=window.GridToCoord(n,t);e=cc.instantiate(this.landsPrefab),e.x=i.x,e.y=i.y,e.getChildByName("tips").active=!1,this.lands.addChild(e)}},OnCancelSelectLand:function(){"undefined"!=typeof this.lastHightLight&&(this.HightLightLandsPrefab(this.lastHightLight,this.selectLandIndex,!1),this.lastHightLight=void 0,this.selectLandIndex=-1)},OnLoginSuccess:function(){this.scrollView.horizontal=!0,this.scrollView.vertical=!0,this.selectLandIndex=-1,this.ReLoadData(),this.touchNode.on(cc.Node.EventType.TOUCH_END,function(e){var t=this.lands.convertToNodeSpaceAR(e.getLocation()),n=window.CoordToGrid(t.x,t.y);if(n.x>=0&&n.x<3&&n.y>=0&&n.y<4){var i=n.x+3*n.y;if(i<12){var o=this.lands.children,s=o[i];"undefined"!=typeof this.lastHightLight&&this.HightLightLandsPrefab(this.lastHightLight,i,!1);var c=AudioMng();c&&c.playButton(),this.HightLightLandsPrefab(s,i,!0),this.lastHightLight=s,this.selectLandIndex=i}}else this.OnCancelSelectLand()}.bind(this)),this.cangKuSpr.node.on(cc.Node.EventType.TOUCH_END,function(e){GameEvent().SendEvent("OpenWarehouse")}.bind(this))},ReLoadData:function(){for(var e=window.GameData,t=e.lands,n=this.lands.children,i=0;i<n.length;++i)this.InitLandsPrefab(n[i],t[i],t.length===i)},InitLandsPrefab:function(e,t,n){if("undefined"==typeof t)e.getChildByName("lands2").active=!0,e.getChildByName("lands1").active=!1,e.getChildByName("plant").active=!1,e.getChildByName("disaster").active=!1;else if(e.getChildByName("lands2").active=!1,e.getChildByName("lands1").active=!0,e.getChildByName("disaster").active=!1,0===t.state)e.getChildByName("plant").active=!1,e.getChildByName("time").active=!1;else if(1===t.state){e.getChildByName("plant").active=!0;var i=Table.GetEntry("plant",t.seedId);if(i){var s=Table.GetEntry("disaster",i.disasterId);if(null===s)return;var c=e.getChildByName("time");c.active=!0;var a=c.getComponent(cc.Label);if("undefined"!=typeof t.disasterTime&&"undefined"==typeof t.clearDisasterTime){e.getChildByName("disaster").active=!0;var r=e.getChildByName("disaster").getComponent(cc.Sprite),d="disaster"+t.disasterType;cc.loader.loadRes(d,cc.SpriteFrame,function(e,t){r.spriteFrame=t})}var l="undefined"!=typeof t.disasterTime&&2===t.disasterType||3===t.disasterType?t.disasterTime:null,u="undefined"==typeof t.reduceTime?[0,0,0]:t.reduceTime,h=(new Date).getTime(),p=o(u,h,t.sowTime,l,i.time.part,s.effect2,t.clearDisasterTime),f=e.getChildByName("plant").getComponent(cc.Sprite),g="plant/"+i.time.images[0];if(p[0])a.string="植物已经成熟",g="plant/"+i.time.images[2];else{var m,y=p[1],C=p[2];0===y?(m="发芽",g="plant/"+i.time.images[0]):1==y?(m="开花",g="plant/"+i.time.images[1]):(m="结果",g="plant/"+i.time.images[1]);var b=Math.floor(C/v);a.string="剩余"+(b>0?b+"小时":"")+Math.floor(C%v)+"分钟"+m}cc.loader.loadRes(g,cc.SpriteFrame,function(e,t){f.spriteFrame=t})}}else if(2===t.state){var c=e.getChildByName("time");c.active=!0;var a=c.getComponent(cc.Label);a.string="果实已收割",e.getChildByName("plant").active=!0}e.getChildByName("openLands").active=n},HightLightLandsPrefab:function(e,t,n){var i,o;n?(i=e.getChildByName("lands1"),i.active&&(i.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE),o=e.getChildByName("lands2"),o.active&&(o.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE),this.OperatorLands(e,t)):(i=e.getChildByName("lands1"),i.active&&(i.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA),o=e.getChildByName("lands2"),o.active&&(o.getComponent("cc.Sprite").dstBlendFactor=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA),this.CancelOperatorLands(e))},OperatorLands:function(e,t){var n=window.GameData;if(n.lands.length>t){var i=n.lands[t],m=e.getChildByName("operator");m.active=!0;var v;if(i.state===p)v=this.CreateOpertorButton(s),m.addChild(v);else if(i.state===f){v=this.CreateOpertorButton(c),m.addChild(v);var y=Table.GetEntry("plant",i.seedId);if(y){var C=Table.GetEntry("disaster",y.disasterId);if(null===C)return;"undefined"!=typeof i.disasterType&&"undefined"==typeof i.clearDisasterTime&&(1===i.disasterType?(v=this.CreateOpertorButton(h),m.addChild(v)):2===i.disasterType?(v=this.CreateOpertorButton(l),m.addChild(v)):3===i.disasterType&&(v=this.CreateOpertorButton(u),m.addChild(v)));var b="undefined"!=typeof i.disasterTime&&2===i.disasterType||3===i.disasterType?i.disasterTime:null,O="undefined"==typeof i.reduceTime?[0,0,0]:i.reduceTime,S=(new Date).getTime(),L=o(O,S,i.sowTime,b,y.time.part,C.effect2,i.clearDisasterTime);L[0]?"undefined"!=typeof i.disasterType&&"undefined"==typeof i.clearDisasterTime||(v=this.CreateOpertorButton(d),m.addChild(v)):(v=this.CreateOpertorButton(r),m.addChild(v))}v=this.CreateOpertorButton(a),m.addChild(v)}else i.state===g&&(v=this.CreateOpertorButton(a),m.addChild(v))}else if(n.lands.length===t){var B={type:"unlockLands",landIndex:t},P=JSON.stringify(B);GameSocket().Send(P)}},CancelOperatorLands:function(e){var t=e.getChildByName("operator");t.removeAllChildren(),t.active=!1},CreateOpertorButton:function(e){var t,n=null;return e===s?(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="播种",n.on("click",function(e){GameEvent().SendEvent("OpenPackage","sow")})):e===c?(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="详细信息",n.on("click",function(e){})):e===a?(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),n.on("click",function(e){this.OnUserRemovePlant()}.bind(this)),t.active=!1,function(e,t){var n=e.getComponent("cc.Button");cc.loader.loadRes("operate/chandi",cc.SpriteFrame,function(e,t){this.normalSprite=t,this.pressedSprite=t,this.hoverSprite=t,this.disabledSprite=t}.bind(n))}(n,"operate/chandi")):e===r?(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="施肥",n.on("click",function(e){GameEvent().SendEvent("OpenPackage","manure")}),t.active=!1,function(e,t){var n=e.getComponent("cc.Button");cc.loader.loadRes("operate/shifei",cc.SpriteFrame,function(e,t){this.normalSprite=t,this.pressedSprite=t,this.hoverSprite=t,this.disabledSprite=t}.bind(n))}(n,"operate/shifei")):e===d?(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="收割果实",n.on("click",function(e){this.OnUserHarvest()}.bind(this)),t.active=!1,function(e,t){var n=e.getComponent("cc.Button");cc.loader.loadRes("operate/quanShou",cc.SpriteFrame,function(e,t){this.normalSprite=t,this.pressedSprite=t,this.hoverSprite=t,this.disabledSprite=t}.bind(n))}(n,"operate/quanShou")):e===l?(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="浇水",n.on("click",function(e){this.OnClearDisaster()}.bind(this)),t.active=!1,function(e,t){var n=e.getComponent("cc.Button");cc.loader.loadRes("operate/jiaoshui",cc.SpriteFrame,function(e,t){this.normalSprite=t,this.pressedSprite=t,this.hoverSprite=t,this.disabledSprite=t}.bind(n))}(n,"operate/jiaoshui")):e===u?(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="补充营养",n.on("click",function(e){this.OnClearDisaster()}.bind(this))):e===h&&(n=cc.instantiate(this.opertorBtnPrefab),t=n.getComponent("cc.Button").node.getChildByName("Label"),t.getComponent("cc.Label").string="除虫",n.on("click",function(e){this.OnClearDisaster()}.bind(this)),t.active=!1,function(e,t){var n=e.getComponent("cc.Button");cc.loader.loadRes("operate/chuchong",cc.SpriteFrame,function(e,t){this.normalSprite=t,this.pressedSprite=t,this.hoverSprite=t,this.disabledSprite=t}.bind(n))}(n,"operate/chuchong")),n},OnUserSowSeed:function(e){var t=e.detail;if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var n=this.selectLandIndex,i={type:"sowSeeds",seedId:t,landIndex:n},o=JSON.stringify(i);GameSocket().Send(o)}},OnUserManure:function(e){var t=e.detail;if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var n=this.selectLandIndex,i={type:"manure",propertyId:t,landIndex:n},o=JSON.stringify(i);GameSocket().Send(o)}},OnUserRemovePlant:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n={type:"removePlant",landIndex:t},i=JSON.stringify(n);GameSocket().Send(i)}},OnUserHarvest:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n={type:"harvest",landIndex:t},i=JSON.stringify(n);GameSocket().Send(i)}},OnClearDisaster:function(e){if(this.selectLandIndex>=0){this.CancelOperatorLands(this.lastHightLight);var t=this.selectLandIndex,n={type:"clearDisaster",landIndex:t},i=JSON.stringify(n);GameSocket().Send(i)}},update:function(e){"undefined"==typeof this.interval&&(this.interval=0),this.interval+=e;var t=this.refreshSecond/60;this.interval>t&&(this.ReLoadData(),this.interval-=t)}}),cc._RFpop()},{}],harvestLands:[function(e,t,n){"use strict";cc._RFpush(t,"4e41d4UI4ZAjJBpR13emG8I","harvestLands");var i=e("msgHandler"),o={};o.interest="harvestSuccess",o.Process=function(e){GameNotify().AddText("收割成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],info:[function(e,t,n){"use strict";cc._RFpush(t,"500c7bFHShCj5AZu+ZpNbsG","info"),cc.Class({"extends":cc.Component,properties:{roleName:cc.Label,level:cc.Label,money:cc.Label,expProgress:cc.ProgressBar},onLoad:function(){GameEvent().OnEvent("EnterHome",this.OnEnterHome,this),GameEvent().OnEvent("VisitHome",this.OnVisitHome,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnEnterHome:function(){GameEvent().OnEvent("UpdateBaseData",this.ReLoadData,this),GameEvent().OnEvent("UpdateUserInfo",this.ReLoadData,this),GameEvent().OffEvent("UpdateVisitInfo",this.VisitReLoadData,this)},OnVisitHome:function(){GameEvent().OffEvent("UpdateBaseData",this.ReLoadData,this),GameEvent().OffEvent("UpdateUserInfo",this.ReLoadData,this),GameEvent().OnEvent("UpdateVisitInfo",this.VisitReLoadData,this)},ReLoadData:function(){var e=window.GameData;this.roleName.string=e.GetUserName()+"的家园",this.money.string=e.GetMoney(),this.level.string="Lv."+e.GetLevel(),this.expProgress.progress=e.GetLevelExp()/e.GetLevelExpMax();var t=this.expProgress.node.getChildByName("value").getComponent("cc.Label");t.string=e.GetLevelExp()+"/"+e.GetLevelExpMax()},VisitReLoadData:function(e){var t=e.detail,n=window.GameData;this.roleName.string=t.username+"的家园",this.money.string=t.money,this.level.string="Lv."+n.GetLevelByExp(t.experience),this.expProgress.progress=n.GetLevelExpByExp(t.experience)/n.GetLevelExpMax();var i=this.expProgress.node.getChildByName("value").getComponent("cc.Label");i.string=n.GetLevelExpByExp(t.experience)+"/"+n.GetLevelExpMax()}}),cc._RFpop()},{}],loginHandler:[function(e,t,n){"use strict";cc._RFpush(t,"dc886cpH0JA95NAuisHz8Rb","loginHandler");var i=e("msgHandler"),o={};o.interest="loginSuccess",o.Process=function(e){GameEvent().SendEvent("LoginSuccess")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],login:[function(e,t,n){"use strict";cc._RFpush(t,"69ac94zGKRA/rekHALWuDIK","login"),cc.Class({"extends":cc.Component,properties:{loginBtn:cc.Button,registerBtn:cc.Button,inputAccount:cc.EditBox,inputPassword:cc.EditBox},onLoad:function(){this.loginBtn.node.on("click",this.OnLogin,this),this.registerBtn.node.on("click",this.OnRegister,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnLogin:function(e){if(0===this.inputAccount.string.length)return void GameNotify().AddText("请输入账号");if(0===this.inputPassword.string.length)return void GameNotify().AddText("请输入密码 ");var t={type:"login",account:this.GetAccount(),password:this.GetPassword()},n=JSON.stringify(t);GameSocket().Send(n)},OnRegister:function(e){GameEvent().SendEvent("GoRegister")},GetAccount:function(){return this.inputAccount.string},GetPassword:function(){return this.inputPassword.string}}),cc._RFpop()},{}],main:[function(e,t,n){"use strict";cc._RFpush(t,"f6babQhRldN7qU5r2qiWXpj","main"),cc.Class({"extends":cc.Component,properties:{infoPnl:cc.Node,toolbarPnl:cc.Node,loginPnl:cc.Node,registerPnl:cc.Node,shopPnl:cc.Node,packagePnl:cc.Node,buySeedPnl:cc.Node,buyPropPnl:cc.Node,sellFruitPnl:cc.Node,warehousePnl:cc.Node,socialPnl:cc.Node},onLoad:function(){this.HideAllPnl(),GameLog("main onLoad");window.AudioMng()},start:function(){GameSocket().Connect(window.GameHost,window.GameProt),GameEvent().OnEvent("connectedServer",this.OnConectServe,this),GameEvent().OnEvent("GoRegister",this.OnGoRegister,this),GameEvent().OnEvent("LoginSuccess",this.OnLoginSuccess,this),GameEvent().OnEvent("CancelRegister",this.OnCancelRegister,this),GameEvent().OnEvent("RegisterSuccess",this.OnRegisterSuccess,this),GameEvent().OnEvent("BuyItemsSuccess",this.OnBuyItemsSuccess,this),GameEvent().OnEvent("OpenShop",this.OnOpenShop,this),GameEvent().OnEvent("OpenPackage",this.OnOpenPackage,this),GameEvent().OnEvent("OpenBuySeed",this.OnOpenBuySeed,this),GameEvent().OnEvent("OpenBuyProperty",this.OnOpenBuyProperty,this),GameEvent().OnEvent("OpenWarehouse",this.OnOpenWarehouse,this),GameEvent().OnEvent("OpenSellFruit",this.OnOpenSellFruit,this)},HideAllPnl:function(){this.infoPnl.getComponent("info").OnHide(),this.toolbarPnl.getComponent("toolbar").OnHide(),this.loginPnl.getComponent("login").OnHide(),this.registerPnl.getComponent("register").OnHide(),this.shopPnl.getComponent("shop").OnHide(),this.packagePnl.getComponent("package").OnHide(),this.buySeedPnl.getComponent("buySeed").OnHide(),this.buyPropPnl.getComponent("buyProperty").OnHide(),this.sellFruitPnl.getComponent("sellFruit").OnHide,this.warehousePnl.getComponent("warehouse").OnHide(),this.socialPnl.getComponent("social").OnHide()},OnConectServe:function(e){GameLog("OnConectServe"),this.loginPnl.getComponent("login").OnShow()},OnGoRegister:function(e){this.loginPnl.getComponent("login").OnHide(),this.registerPnl.getComponent("register").OnShow()},OnLoginSuccess:function(e){GameLog("登录成功"),this.HideAllPnl(),this.infoPnl.getComponent("info").OnShow(),this.toolbarPnl.getComponent("toolbar").OnShow(),this.socialPnl.getComponent("social").OnShow(),GameEvent().SendEvent("EnterHome")},OnCancelRegister:function(e){this.loginPnl.getComponent("login").OnShow(),this.registerPnl.getComponent("register").OnHide()},OnRegisterSuccess:function(e){this.loginPnl.getComponent("login").OnShow(),this.registerPnl.getComponent("register").OnHide()},OnBuyItemsSuccess:function(e){this.buySeedPnl.getComponent("buySeed").OnHide(),this.buyPropPnl.getComponent("buyProperty").OnHide()},OnOpenShop:function(e){this.shopPnl.getComponent("shop").OnShow(),GameEvent().SendEvent("NeedCancelSelectLand")},OnOpenPackage:function(e){var t=this.packagePnl.getComponent("package");t.OnShow(),t.OpenWith(e.detail)},OnOpenBuySeed:function(e){var t=this.buySeedPnl.getComponent("buySeed");t.OnShow(),t.Setup(e.detail)},OnOpenBuyProperty:function(e){var t=this.buyPropPnl.getComponent("buyProperty");t.OnShow(),t.Setup(e.detail)},OnOpenWarehouse:function(e){var t=this.warehousePnl.getComponent("warehouse");t.OnShow(),GameEvent().SendEvent("NeedCancelSelectLand")},OnOpenSellFruit:function(e){var t=this.sellFruitPnl.getComponent("sellFruit");t.OnShow(),t.Setup(e.detail)}}),cc._RFpop()},{}],manureLands:[function(e,t,n){"use strict";cc._RFpush(t,"19dd9UWpJ1Il7IACP7pUdMq","manureLands");var i=e("msgHandler"),o={};o.interest="manureSuccess",o.Process=function(e){GameNotify().AddText("施肥成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],maskLayer:[function(e,t,n){"use strict";cc._RFpush(t,"b1c74rq4bhEX4QlqH8KfxeH","maskLayer"),cc.Class({"extends":cc.Component,onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_END,function(e){})}}),cc._RFpop()},{}],msgHandler:[function(e,t,n){"use strict";cc._RFpush(t,"bf199399u1H4Z4f07UIDO9L","msgHandler"),function(){var e={};e.Add=function(e){"string"==typeof e.interest&&"function"==typeof e.Process?(this[e.interest]=e.Process,GameLog("Add handler :"+e.interest)):GameLog("error type of handler"+e)},e.Process=function(e){"string"==typeof e.type&&"function"==typeof this[e.type]?this[e.type](e):GameLog("invalid massage ->>"+e)},"undefined"!=typeof t&&(t.exports=e),"undefined"!=typeof window&&(window.MessageHandler=e)}(),cc._RFpop()},{}],neighbourList:[function(e,t,n){"use strict";cc._RFpush(t,"cf5e4dgpbZOS7sEK+/Nrr8r","neighbourList");var i=e("msgHandler"),o={};o.interest="neighbourList",o.Process=function(e){var t=window.GameData;t.neighbourList=e.list.slice(),GameEvent().SendEvent("UpdateNeighbourList")},i.Add(o);var s={};s.interest="neighbourListSuccess",s.Process=function(e){var t=window.GameData;t.neighbourList=e.list.slice(),GameEvent().SendEvent("UpdateNeighbourList")},i.Add(s),cc._RFpop()},{msgHandler:"msgHandler"}],notifyText:[function(e,t,n){"use strict";cc._RFpush(t,"6311aEnqulPi492lRJveIXd","notifyText");var i=cc.Class({"extends":cc.Component,properties:{textPrefab:cc.Prefab},statics:{inst:null},onLoad:function(){i.inst=this,this.entityPool=new cc.NodePool;for(var e=5,t=0;t<e;++t){var n=cc.instantiate(this.textPrefab);this.entityPool.put(n)}},AddText:function(e,t,n){var i=null;i=this.entityPool.size()>0?this.entityPool.get():cc.instantiate(this.textPrefab),i.parent=this.node,i.color=t?t:cc.Color.GREEN;var o=i.getComponent("cc.Label");o.string=e,o.fontSize=n?n:30;var s=cc.director.getWinSize(),c=cc.moveBy(2,cc.p(0,s.height/8*3)),a=cc.callFunc(this._RemoveText,this,i),r=cc.sequence(c,a);i.runAction(r)},_RemoveText:function(e){this.node.removeChild(e),this.entityPool.put(e)}});cc._RFpop()},{}],"package":[function(e,t,n){"use strict";cc._RFpush(t,"f19b3ye65tJmY2tT2nWSo9d","package");var i=0,o=1,s=2;cc.Class({"extends":cc.Component,properties:{seedPrefab:cc.Prefab,propertyPrefab:cc.Prefab,scrollView:cc.ScrollView,radioButton:{"default":[],type:cc.Toggle},_currentToggle:cc.Toggle,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this);for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e];break}GameEvent().OnEvent("UpdatePackage",this.Load,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=new Array(["plant",this.seedPrefab,this.InitSeedPrefab],["property",this.propertyPrefab,this.InitPropPrefab]),n=this.scrollView.content;if(n.removeAllChildren(),t.length>e){var i=window.GameData,o=i["package"];if("undefined"!=typeof o[e]){var s,c,a;for(var r in o[e])o[e][r]>0&&(s=parseInt(r),c=Table.GetEntry(t[e][0],s),a=cc.instantiate(t[e][1]),t[e][2].bind(this)(a,c,o[e][r]),n.addChild(a));this.scrollView.scrollToTop(.1)}}}}},OpenWith:function(e){"undefined"==typeof e?this.openReason=i:"sow"===e?(this.openReason=o,this.radioButton[0].check()):"manure"===e?(this.openReason=s,this.radioButton[1].check()):this.openReason=i},InitSeedPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("level").getComponent("cc.Label");o.string=t.minLevel+"级";var s=e.getChildByName("count").getComponent("cc.Label");s.string="数量:"+n,e.config=t,e.on(cc.Node.EventType.TOUCH_END,function(e){this.OnSeedClick(e.target.config)}.bind(this))},InitPropPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("count").getComponent("cc.Label");o.string="数量:"+n,e.config=t,e.on(cc.Node.EventType.TOUCH_END,function(e){this.OnPropertyClikc(e.target.config)}.bind(this))},radioButtonClicked:function(e){this._currentToggle!==e&&(this._currentToggle=e,this.Load())},OnSeedClick:function(e){this.openReason===o&&(this.OnHide(),GameEvent().SendEvent("UserSowSeeds",e.id))},OnPropertyClikc:function(e){this.openReason===s&&(this.OnHide(),GameEvent().SendEvent("UserManure",e.id))},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}],registerHander:[function(e,t,n){"use strict";cc._RFpush(t,"0d938HjkqRBhprE7RodwBx1","registerHander");var i=e("msgHandler"),o={};o.interest="registerSuccess",o.Process=function(e){GameEvent().SendEvent("RegisterSuccess")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],register:[function(e,t,n){"use strict";cc._RFpush(t,"83632q929pAyqfS/6vYW90v","register"),cc.Class({"extends":cc.Component,properties:{registerBtn:cc.Button,cancelBtn:cc.Button,inputAccount:cc.EditBox,inputPassword:cc.EditBox},onLoad:function(){this.registerBtn.node.on("click",this.OnRegister,this),this.cancelBtn.node.on("click",this.OnCancel,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnRegister:function(e){if(0===this.inputAccount.string.length)return void GameNotify().AddText("请输入账号");if(0===this.inputPassword.string.length)return void GameNotify().AddText("请输入密码 ");var t={type:"register",account:this.GetAccount(),password:this.GetPassword()},n=JSON.stringify(t);GameSocket().Send(n)},OnCancel:function(e){GameEvent().SendEvent("CancelRegister")},GetAccount:function(){return this.inputAccount.string},GetPassword:function(){return this.inputPassword.string}}),cc._RFpop()},{}],removePlant:[function(e,t,n){"use strict";cc._RFpush(t,"fac37jQz3lLp43mZnamrGPh","removePlant");var i=e("msgHandler"),o={};o.interest="removePlantSuccess",o.Process=function(e){GameLog(e),GameNotify().AddText("铲除成功")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],sellFruitHander:[function(e,t,n){"use strict";cc._RFpush(t,"e076d1POXxMkY6zps6Ur9SM","sellFruitHander");var i=e("msgHandler"),o={};o.interest="sellFruitSuccess",o.Process=function(e){GameNotify().AddText("出售成功!")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],sellFruit:[function(e,t,n){"use strict";cc._RFpush(t,"f9346Fbh+BE7qdeCF0ceJ55","sellFruit"),cc.Class({"extends":cc.Component,properties:{addBtn:cc.Button,subBtn:cc.Button,sellBtn:cc.Button,cancelBtn:cc.Button,sellNumber:cc.Label,fruitName:cc.Label,price:cc.Label,amount:cc.Label},onLoad:function(){this.addBtn.node.on("click",this.OnAdd,this),this.subBtn.node.on("click",this.OnSub,this),this.sellBtn.node.on("click",this.OnSell,this),this.cancelBtn.node.on("click",function(e){this.OnHide()}.bind(this))},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},OnAdd:function(e){this.sellCount+=1,this.sellCount<=0&&(this.sellCount=1),this.sellCount>this.hasCount?(this.sellCount=this.hasCount,this.addBtn.interactable=!1):this.addBtn.interactable=!0,this.sellNumber.string=this.sellCount,this.amount.string=this.sellCount*this.sellPrice+"金币",
this.sellCount>1&&(this.subBtn.interactable=!0)},OnSub:function(e){this.sellCount-=1,this.sellCount<=0&&(this.sellCount=1,this.subBtn.interactable=!1),this.sellNumber.string=this.sellCount,this.amount.string=this.sellCount*this.sellPrice+"金币",this.sellCount<this.hasCount&&(this.addBtn.interactable=!0)},OnSell:function(e){var t=window.GameData;if(t["package"][2][this.fruitId]<this.sellCount){var n=Table.GetEntry("error",17);return void(n&&GameNotify().AddText(n.description,window.ErrorNotifyColor))}var i={type:"sellFruit",fruitId:this.fruitId,count:this.sellCount},o=JSON.stringify(i);GameSocket().Send(o),this.OnHide()},Setup:function(e){this.fruitName.string=e.fruit.name,this.price.string=e.fruit.price+"金币",this.fruitId=e.id,this.sellPrice=e.fruit.price;var t=window.GameData;this.hasCount=0,"undefined"!=typeof t["package"][2][e.id]&&t["package"][2][e.id]>0&&(this.hasCount=t["package"][2][e.id]),this.sellCount=this.hasCount,this.OnAdd()}}),cc._RFpop()},{}],sell:[function(e,t,n){"use strict";cc._RFpush(t,"bc2b7s9RRJKkoJCsF5ZJcqy","sell"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],shop:[function(e,t,n){"use strict";cc._RFpush(t,"1b823M9uh9CW7iwBEZYCSqk","shop"),cc.Class({"extends":cc.Component,properties:{shopSeedItemPrefab:cc.Prefab,shopPropItemPrefab:cc.Prefab,scrollView:cc.ScrollView,radioButton:{"default":[],type:cc.Toggle},_currentToggle:cc.Toggle,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this);for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e];break}},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=new Array(["plant",this.shopSeedItemPrefab,this.InitSeedPrefab],["property",this.shopPropItemPrefab,this.InitPropPrefab]),n=this.scrollView.content;if(n.removeAllChildren(),t.length>e){var i=Table.GetEntry("shop",e+1);if(i&&i.sell.length>0){for(var o,s,c,a=0;a<i.sell.length;++a)o=i.sell[a],s=Table.GetEntry(t[e][0],o),c=cc.instantiate(t[e][1]),t[e][2].bind(this)(c,s),n.addChild(c);this.scrollView.scrollToTop(.1)}}}},InitSeedPrefab:function(e,t){var n=e.getChildByName("name").getComponent("cc.Label");n.string=t.name;var i=e.getChildByName("level").getComponent("cc.Label");i.string=t.minLevel+"级";var o=e.getChildByName("money").getComponent("cc.Label");o.string=t.buy+"金币",e.config=t,e.on(cc.Node.EventType.TOUCH_END,function(e){this.OnOpenBuySeed(e.target.config)}.bind(this))},OnOpenBuySeed:function(e){GameEvent().SendEvent("OpenBuySeed",e)},InitPropPrefab:function(e,t){var n=e.getChildByName("icon").getComponent("cc.Sprite");cc.loader.loadRes(t.imagPath,cc.SpriteFrame,function(e,t){this.spriteFrame=t}.bind(n));var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.name;var o=e.getChildByName("money").getComponent("cc.Label");o.string=t.buy+"金币",e.config=t,e.on(cc.Node.EventType.TOUCH_END,function(e){this.OnOpenBuyProp(e.target.config)},this)},OnOpenBuyProp:function(e){GameEvent().SendEvent("OpenBuyProperty",e)},radioButtonClicked:function(e){this._currentToggle!==e&&(this._currentToggle=e,this.Load())},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}],social:[function(e,t,n){"use strict";cc._RFpush(t,"cba04NXrWNLzoiXEbjNHFfP","social"),cc.Class({"extends":cc.Component,properties:{radioButton:{"default":[],type:cc.Toggle},flodButton:cc.Button,scrollView:cc.ScrollView,itemPrefab:cc.Prefab,_currentToggle:cc.Toggle,_flodState:cc.Integer},onLoad:function(){this._flodState=0,this.flodButton.node.on("click",this.OnFold,this),this.OnFold();for(var e=0;e<this.radioButton.length;++e)if(this.radioButton[e].isChecked){this._currentToggle=this.radioButton[e];break}GameEvent().OnEvent("UpdateNeighbourList",this.Reload,this)},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1},radioButtonClicked:function(e){this._currentToggle!==e&&(this._currentToggle=e,this.Reload())},OnFold:function(){var e;0===this._flodState?(e=this.node.getComponent(cc.Widget),e.right=-300,this._flodState=1,this.scrollView.scrollToTop(.1)):(e=this.node.getComponent(cc.Widget),e.right=4,this._flodState=0,this.scrollView.scrollToTop(.1))},Reload:function(){var e=this.radioButton.indexOf(this._currentToggle);if(e>=0){var t=this.scrollView.content;t.removeAllChildren();var n=window.GameData;if(0===e)for(var i,o,s=n.neighbourList,c=0;c<s.length;++c)i=cc.instantiate(this.itemPrefab),o=s[c],this.InitItemPrefab(i,o),t.addChild(i)}},InitItemPrefab:function(e,t){var n=e.getChildByName("name").getComponent("cc.Label");n.string=t.username;var i=e.getChildByName("level").getComponent("cc.Label");i.string="Lv."+GameData.GetLevelByExp(t.experience),e.userId=t.id;var o=e.getChildByName("visit");o.on("click",this.OnVisit,this)},OnVisit:function(e){var t=e.target.userId,n={type:"visitHome",userId:t},i=JSON.stringify(n);GameSocket().Send(i)}}),cc._RFpop()},{}],socket:[function(e,t,n){"use strict";cc._RFpush(t,"a6873XdOGBBNaNL7VhdxpQ+","socket");var i=cc.Class({"extends":cc.Component,statics:{inst:null},onLoad:function(){i.inst=this,this.connected=!1,this.webSocket=null},Connect:function(e,t,n){var i=this;if(!i.webSocket)try{var o=new WebSocket("ws://"+e+":"+t+"/"+("undefined"!=typeof n?n:""));o.onopen=function(e){i.connected=!0,i.webSocket=o,GameEvent().SendEvent("connectedServer")},o.onmessage=function(e){i.OnReceiveMessage(e)},o.onerror=function(e){GameLog("GameSocket error!!!!")},o.onclose=function(e){GameLog("GameSocket closed."),i.connected=!1,GameNotify().AddText("连接服务器失败!",new cc.Color(255,32,32))}}catch(s){GameLog(s)}},IsConnected:function(){return this.connected},OnReceiveMessage:function(e){var t=e.data;console.log("Receive data:"+t);try{var n=JSON.parse(t);MessageHandler.Process(n)}catch(e){GameLog(e)}},Send:function(e){this.connected&&this.webSocket.send(e)}});cc._RFpop()},{}],sowSeeds:[function(e,t,n){"use strict";cc._RFpush(t,"8436dsX3GdA27FeT0WUC4mm","sowSeeds");var i=e("msgHandler"),o={};o.interest="sowSeedsSuccess",o.Process=function(e){GameLog(e),GameNotify().AddText("播种成功")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],toolbar:[function(e,t,n){"use strict";cc._RFpush(t,"0a2c4MVMjNCg4dSQx6HQWwO","toolbar"),cc.Class({"extends":cc.Component,properties:{shopBtn:cc.Button,packageBtn:cc.Button},onLoad:function(){this.shopBtn.node.on("click",function(){GameEvent().SendEvent("OpenShop")}),this.packageBtn.node.on("click",function(){GameEvent().SendEvent("OpenPackage")})},OnShow:function(){this.node.active=!0},OnHide:function(){this.node.active=!1}}),cc._RFpop()},{}],unlockLands:[function(e,t,n){"use strict";cc._RFpush(t,"acc5fKIFnlG1a8JmLDtwrEO","unlockLands");var i=e("msgHandler"),o={};o.interest="unlockLandsSuccess",o.Process=function(e){GameLog(e),GameNotify().AddText("扩建土地成功")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],userBaseData:[function(e,t,n){"use strict";cc._RFpush(t,"aac4bOG2OBAEZ78IJJ4C9ry","userBaseData");var i=e("msgHandler"),o={};o.interest="userBaseData",o.Process=function(e){var t=window.GameData;t.userId=e.id,t.userName=e.username,t.money=e.money,t.experience=e.experience,t.vip=e.vip,t.lands=JSON.parse(e.lands),t["package"]=JSON.parse(e["package"]),GameEvent().SendEvent("UpdateBaseData")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],userDataSync:[function(e,t,n){"use strict";cc._RFpush(t,"37dc3E2WXtHFbxFN5E1HTL1","userDataSync");var i=e("msgHandler"),o={};o.interest="userDataSync",o.Process=function(e){var t=window.GameData,n=!1;"undefined"!=typeof e.money&&(t.money=e.money,n=!0),"undefined"!=typeof e.experience&&(t.experience=e.experience,n=!0),"undefined"!=typeof e.vip&&(t.vip=e.vip,n=!0),"undefined"!=typeof e.lands&&(t.lands=JSON.parse(e.lands),GameEvent().SendEvent("UpdateLands")),"undefined"!=typeof e["package"]&&(t["package"]=JSON.parse(e["package"]),GameEvent().SendEvent("UpdatePackage")),n&&GameEvent().SendEvent("UpdateUserInfo")},i.Add(o),cc._RFpop()},{msgHandler:"msgHandler"}],warehouse:[function(e,t,n){"use strict";cc._RFpush(t,"5f12bh6LmFEorn6viVVDOUf","warehouse"),cc.Class({"extends":cc.Component,properties:{fruitPrefab:cc.Prefab,scrollView:cc.ScrollView,closeBtn:cc.Button},onLoad:function(){this.closeBtn.node.on("click",this.OnClose,this),GameEvent().OnEvent("UpdatePackage",this.Load,this)},OnShow:function(){this.node.active=!0,this.Load()},OnHide:function(){this.node.active=!1},Load:function(){if(this.node.active){var e=this.scrollView.content;e.removeAllChildren();var t=window.GameData,n=t["package"],i=2;if("undefined"!=typeof n[i]){var o,s,c;for(var a in n[i])n[i][a]>0&&(o=parseInt(a),s=Table.GetEntry("plant",o),c=cc.instantiate(this.fruitPrefab),this.InitFruitPrefab(c,s,n[i][a]),e.addChild(c));this.scrollView.scrollToTop(.1)}}},InitFruitPrefab:function(e,t,n){var i=e.getChildByName("name").getComponent("cc.Label");i.string=t.fruit.name;var o=e.getChildByName("level").getComponent("cc.Label");o.string=t.minLevel+"级";var s=e.getChildByName("count").getComponent("cc.Label");s.string="数量:"+n,e.config=t,e.on(cc.Node.EventType.TOUCH_END,function(e){this.OnFruitClick(e.target.config)}.bind(this))},OnFruitClick:function(e){GameEvent().SendEvent("OpenSellFruit",e)},OnClose:function(){this.OnHide()}}),cc._RFpop()},{}]},{},["AudioMng","ButtonScaler","canvas","gameData","gameEvent","gameLayer","buyItemsHandler","clearDisaster","error","harvestLands","loginHandler","manureLands","neighbourList","registerHander","removePlant","sellFruitHander","sowSeeds","unlockLands","userBaseData","userDataSync","msgHandler","notifyText","socket","buyProperty","buySeed","info","login","main","maskLayer","package","register","sell","sellFruit","shop","social","toolbar","warehouse"]);